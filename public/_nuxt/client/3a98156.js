(window.webpackJsonp=window.webpackJsonp||[]).push([[48],{566:function(e,t,n){},587:function(e,t,n){"use strict";var r=n(78),o=n(3),l=(n(24),n(87),n(62),n(38),n(60),n(6),n(111),n(12),n(10),n(15),n(16),n(11),n(17),n(566),n(530)),c=n(149),d=n(176),h=n(261),f=n(262),m=n(259),v=n(260),k=n(175),w=n(8),x=n(13),y=n(2);function O(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function $(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?O(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):O(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var F=Object(w.a)(d.a,h.a,f.a,m.a,v.a,c.a);t.a=F.extend({name:"v-dialog",directives:{ClickOutside:k.a},props:{dark:Boolean,disabled:Boolean,fullscreen:Boolean,light:Boolean,maxWidth:[String,Number],noClickAnimation:Boolean,origin:{type:String,default:"center center"},persistent:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,transition:{type:[String,Boolean],default:"dialog-transition"},width:[String,Number]},data:function(){return{activatedBy:null,animate:!1,animateTimeout:-1,stackMinZIndex:200,previousActiveElement:null}},computed:{classes:function(){var e;return e={},Object(o.a)(e,"v-dialog ".concat(this.contentClass).trim(),!0),Object(o.a)(e,"v-dialog--active",this.isActive),Object(o.a)(e,"v-dialog--persistent",this.persistent),Object(o.a)(e,"v-dialog--fullscreen",this.fullscreen),Object(o.a)(e,"v-dialog--scrollable",this.scrollable),Object(o.a)(e,"v-dialog--animated",this.animate),e},contentClasses:function(){return{"v-dialog__content":!0,"v-dialog__content--active":this.isActive}},hasActivator:function(){return Boolean(!!this.$slots.activator||!!this.$scopedSlots.activator)}},watch:{isActive:function(e){var t;e?(this.show(),this.hideScroll()):(this.removeOverlay(),this.unbind(),null===(t=this.previousActiveElement)||void 0===t||t.focus())},fullscreen:function(e){this.isActive&&(e?(this.hideScroll(),this.removeOverlay(!1)):(this.showScroll(),this.genOverlay()))}},created:function(){this.$attrs.hasOwnProperty("full-width")&&Object(x.e)("full-width",this)},beforeMount:function(){var e=this;this.$nextTick((function(){e.isBooted=e.isActive,e.isActive&&e.show()}))},beforeDestroy:function(){"undefined"!=typeof window&&this.unbind()},methods:{animateClick:function(){var e=this;this.animate=!1,this.$nextTick((function(){e.animate=!0,window.clearTimeout(e.animateTimeout),e.animateTimeout=window.setTimeout((function(){return e.animate=!1}),150)}))},closeConditional:function(e){var t=e.target;return!(this._isDestroyed||!this.isActive||this.$refs.content.contains(t)||this.overlay&&t&&!this.overlay.$el.contains(t))&&this.activeZIndex>=this.getMaxZIndex()},hideScroll:function(){this.fullscreen?document.documentElement.classList.add("overflow-y-hidden"):f.a.options.methods.hideScroll.call(this)},show:function(){var e=this;!this.fullscreen&&!this.hideOverlay&&this.genOverlay(),this.$nextTick((function(){e.$nextTick((function(){var t,n;(null===(t=e.$refs.dialog)||void 0===t?void 0:t.contains(document.activeElement))||(e.previousActiveElement=document.activeElement,null===(n=e.$refs.dialog)||void 0===n||n.focus()),e.bind()}))}))},bind:function(){window.addEventListener("focusin",this.onFocusin)},unbind:function(){window.removeEventListener("focusin",this.onFocusin)},onClickOutside:function(e){this.$emit("click:outside",e),this.persistent?this.noClickAnimation||this.animateClick():this.isActive=!1},onKeydown:function(e){if(e.keyCode===y.t.esc&&!this.getOpenDependents().length)if(this.persistent)this.noClickAnimation||this.animateClick();else{this.isActive=!1;var t=this.getActivator();this.$nextTick((function(){return t&&t.focus()}))}this.$emit("keydown",e)},onFocusin:function(e){if(e&&this.retainFocus){var t=e.target;if(t&&this.$refs.dialog&&![document,this.$refs.dialog].includes(t)&&!this.$refs.dialog.contains(t)&&this.activeZIndex>=this.getMaxZIndex()&&!this.getOpenDependentElements().some((function(e){return e.contains(t)}))){var n=this.$refs.dialog.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),o=Object(r.a)(n).find((function(e){return!e.hasAttribute("disabled")}));o&&o.focus()}}},genContent:function(){var e=this;return this.showLazyContent((function(){return[e.$createElement(l.a,{props:{root:!0,light:e.light,dark:e.dark}},[e.$createElement("div",{class:e.contentClasses,attrs:$({role:"dialog","aria-modal":e.hideOverlay?void 0:"true"},e.getScopeIdAttrs()),on:{keydown:e.onKeydown},style:{zIndex:e.activeZIndex},ref:"content"},[e.genTransition()])])]}))},genTransition:function(){var content=this.genInnerContent();return this.transition?this.$createElement("transition",{props:{name:this.transition,origin:this.origin,appear:!0}},[content]):content},genInnerContent:function(){var data={class:this.classes,attrs:{tabindex:this.isActive?0:void 0},ref:"dialog",directives:[{name:"click-outside",value:{handler:this.onClickOutside,closeConditional:this.closeConditional,include:this.getOpenDependentElements}},{name:"show",value:this.isActive}],style:{transformOrigin:this.origin}};return this.fullscreen||(data.style=$($({},data.style),{},{maxWidth:Object(y.g)(this.maxWidth),width:Object(y.g)(this.width)})),this.$createElement("div",data,this.getContentSlot())}},render:function(e){return e("div",{staticClass:"v-dialog__container",class:{"v-dialog__container--attached":""===this.attach||!0===this.attach||"attach"===this.attach}},[this.genActivator(),this.genContent()])}})},637:function(e,t,n){},670:function(e,t,n){"use strict";n(637)},690:function(e,t,n){"use strict";n.r(t);var r=n(233),o=n(165),l=n(241),c=n(76),d=n(587),h=n(528),f=n(98),m=(n(34),n(18)),v=(n(52),n(28),n(150),n(6),n(48),n(51),n(636),n(354),n(36),{name:"FotoPerfil",data:function(){return{saving:!1,saved:!1,deleting:!1,deleted:!1,errorDialog:null,errorText:"",uploadFieldName:"file",maxSize:1024,fotoPerfil:"",formData:null,imageFile:null}},props:{},watch:{},methods:{launchFilePicker:function(){this.$refs.file.click()},onFileChange:function(e,t){var n=this.maxSize;if(this.saved=!1,this.deleted=!1,this.formData=null,this.imageFile=t[0],1===t.length){var r=this.imageFile.size/n/n;if(!this.imageFile.type.match("image.png")&&!this.imageFile.type.match("image.jpg")&&!this.imageFile.type.match("image.jpeg"))return this.errorDialog=!0,this.errorText="Se debe elegir un archivo imagen jpg o png.",this.formData=null,void(this.imageFile=null);if(r>1)return this.errorDialog=!0,this.errorText="El archivo es muy grande, favor elegir un archivo de hasta 1MB.",this.formData=null,void(this.imageFile=null);this.formData=new FormData,this.formData.append("image",this.imageFile),this.fotoPerfil=URL.createObjectURL(this.imageFile)}else this.formData=null,this.imageFile=null,this.errorDialog=!0,this.errorText="Solo se puede subir una foto."},reiniciarImagen:function(){var e=this.$store.state.modules.usuarios.fotoPerfil;this.fotoPerfil=e||"",this.formData=null,this.imageFile=null},actualizarFotoPerfil:function(){var e=this;return Object(m.a)(regeneratorRuntime.mark((function t(){var n,r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.saving=!0,n=e.$store.state.modules.usuarios,t.prev=2,r=e.$firebaseFotoPerfil.storage().ref(),(o=r.child("".concat(n.uid,"/verificacion/").concat(e.imageFile.name)).put(e.imageFile)).on(e.$firebase.storage.TaskEvent.STATE_CHANGED,(function(t){var progress=t.bytesTransferred/t.totalBytes*100;switch(console.log("Upload is "+progress+"% done"),t.state){case e.$firebase.storage.TaskState.PAUSED:console.log("Upload is paused");break;case e.$firebase.storage.TaskState.RUNNING:console.log("Upload is running")}}),(function(e){console.log(e),e.code}),(function(){o.snapshot.ref.getDownloadURL().then((function(t){e.$store.commit("modules/usuarios/setFotoPerfil",t),e.saved=!0,e.saving=!1,e.reiniciarImagen()}))})),t.next=16;break;case 8:return t.prev=8,t.t0=t.catch(2),console.log("error",t.t0),t.next=13,e.$store.dispatch("modules/sistema/errorHandler",t.t0);case 13:t.sent,e.saving=!1,e.reiniciarImagen();case 16:case"end":return t.stop()}}),t,null,[[2,8]])})))()},eliminarFotoPerfil:function(){var e=this;return Object(m.a)(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.formData&&e.fotoPerfil){t.next=3;break}return t.abrupt("return");case 3:if(e.deleting=!0,t.prev=4,!(n=e.$firebase.auth().currentUser)){t.next=12;break}return t.next=9,n.getIdToken();case 9:t.t0=t.sent,t.next=13;break;case 12:t.t0="";case 13:return n=t.t0,t.next=16,e.$store.dispatch("modules/usuarios/setTOKEN",n);case 16:return r={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}},t.next=19,e.$axios.$delete("/serviceUsuario/eliminarFotoPerfil",r);case 19:e.$store.commit("modules/usuarios/setFotoPerfil",null),e.deleted=!0,t.next=29;break;case 23:return t.prev=23,t.t1=t.catch(4),console.log("error",t.t1),t.next=28,e.$store.dispatch("modules/sistema/errorHandler",t.t1);case 28:t.sent;case 29:return t.prev=29,e.deleting=!1,e.reiniciarImagen(),t.finish(29);case 33:case"end":return t.stop()}}),t,null,[[4,23,29,33]])})))()}},created:function(){var e=this.$store.state.modules.usuarios.fotoPerfil;this.fotoPerfil=e||""}}),k=(n(670),n(32)),component=Object(k.a)(v,(function(){var e=this,t=e._self._c;return t("div",[t("div",[t("div",{attrs:{slot:"activator"},slot:"activator"},[e.fotoPerfil?t(r.a,{directives:[{def:f.a,name:"ripple",rawName:"v-ripple"}],staticClass:"mb-3 avatar-img",attrs:{size:"210px"},on:{click:function(t){return e.launchFilePicker()}}},[t("img",{attrs:{src:e.fotoPerfil,alt:""}})]):t(r.a,{directives:[{def:f.a,name:"ripple",rawName:"v-ripple"}],staticClass:"mb-3 avatar-img",attrs:{size:"210px"},on:{click:function(t){return e.launchFilePicker()}}},[t("span",{staticClass:"white--text"},[e._v("\n                    Agregue una foto de perfil\n                ")])])],1)]),e._v(" "),t("input",{ref:"file",staticStyle:{display:"none"},attrs:{type:"file",name:e.uploadFieldName},on:{change:function(t){return e.onFileChange(t.target.name,t.target.files)}}}),e._v(" "),t(d.a,{attrs:{"max-width":"300"},model:{value:e.errorDialog,callback:function(t){e.errorDialog=t},expression:"errorDialog"}},[t(l.a,[t(c.c,{staticClass:"subheading"},[e._v("\n                "+e._s(e.errorText)+"\n            ")]),e._v(" "),t(c.a,[t(h.a),e._v(" "),t(o.a,{attrs:{flat:""},on:{click:function(t){e.errorDialog=!1}}},[e._v("Got it!")])],1)],1)],1),e._v(" "),t("div",{staticClass:"mt-5"},[e.formData?t(o.a,{staticClass:"mt-1 mb-1",attrs:{block:"",text:"",color:"#683bce",loading:e.saving||e.deleting,disabled:!e.formData},on:{click:e.actualizarFotoPerfil}},[e._v("Actualizar foto de perfil")]):e._e(),e._v(" "),e.formData?t(o.a,{staticClass:"mt-1 mb-1",attrs:{block:"",disabled:e.saving||e.deleting,text:"",color:"#ff1d89"},on:{click:e.reiniciarImagen}},[e._v("Reiniciar")]):e._e(),e._v(" "),!e.formData&&e.fotoPerfil?t(o.a,{staticClass:"mt-1 mb-1",attrs:{block:"",disabled:e.saving||e.deleting,text:"",color:"red"},on:{click:e.eliminarFotoPerfil}},[e._v("Borrar foto de perfil")]):e._e()],1)],1)}),[],!1,null,"2816a24d",null);t.default=component.exports}}]);