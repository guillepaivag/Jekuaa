(window.webpackJsonp=window.webpackJsonp||[]).push([[82],{1060:function(t,e,r){"use strict";r.r(e);var n=r(624),o=r(165),c=r(562),l=r(661),d=r(1016),h=r(1018),v=r(1017),f=r(1015),m=r(232),_=r(235),C=r(561),y=r(18),x=(r(52),r(355),r(110)),k={name:"",layout:"miembro",middleware:"esInstructor",data:function(){return{uidCurso:this.$route.params.uidCurso,errores:{curso:null,unidades:[],clases:[]},existeErrores:!1,verificado:!1,buscandoErrores:!1,publicando:!1,unsubscribe:null}},methods:{verificar:function(){var t=this;return Object(y.a)(regeneratorRuntime.mark((function e(){var r,n,o,c,l,i,d,h,v,f,m,_,C,y,k;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.buscandoErrores=!0,t.verificado=!1,t.existeErrores=!1,t.errores={curso:null,unidades:[],clases:[]},r=x.b.firestore(),n=r.collection("CursosBorrador").doc(t.uidCurso),e.next=8,n.get();case 8:if((o=e.sent).exists){e.next=11;break}return e.abrupt("return");case 11:return t.errores.curso=o.data(),e.next=14,n.collection("UnidadesBorrador").where("contieneErrores","==",!0).get();case 14:for(c=e.sent,l=c.docs,i=0;i<l.length;i++)d=l[i],t.errores.unidades.push({uid:d.id,orden:d.data().ordenUnidad,nombre:d.data().nombreUnidad,errores:d.data().mensajesError}),t.errores.unidades.sort((function(t,e){return t.orden-e.orden}));return h=r.collectionGroup("ClasesBorrador").orderBy(x.b.firestore.FieldPath.documentId()).startAt(n.path).endAt(n.path+"ï£¿"),e.next=20,h.get();case 20:v=e.sent,f=v.docs,m=0;case 23:if(!(m<f.length)){e.next=36;break}return _=f[m],C=_.ref.parent.parent.id,e.next=28,n.collection("UnidadesBorrador").doc(C).get();case 28:return y=e.sent,e.next=31,n.collection("ContenidoClasesBorrador").doc(_.id).get();case 31:k=e.sent,(_.data().contieneErrores||k.data().contieneErrores)&&(t.errores.clases.push({uid:_.id,orden:_.data().ordenClase,nombre:_.data().titulo,errores:_.data().mensajesError,datosUnidad:y.data(),datosContenido:k.data()}),t.errores.clases.sort((function(t,e){return t.datosUnidad.ordenUnidad!==e.datosUnidad.ordenUnidad?t.datosUnidad.ordenUnidad-e.datosUnidad.ordenUnidad:t.orden-e.orden})));case 33:m++,e.next=23;break;case 36:t.existeErrores=!!t.errores.curso.mensajesError.length||!!t.errores.unidades.length||!!t.errores.clases.length,t.verificado=!0,t.buscandoErrores=!1;case 39:case"end":return e.stop()}}),e)})))()},publicar:function(){var t=this;return Object(y.a)(regeneratorRuntime.mark((function e(){var r,body,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.publicando=!0,!(r=t.$firebase.auth().currentUser)){e.next=9;break}return e.next=6,r.getIdToken();case 6:e.t0=e.sent,e.next=10;break;case 9:e.t0="";case 10:return r=e.t0,e.next=13,t.$store.dispatch("modules/usuarios/setTOKEN",r);case 13:return body={},n={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},o=t.uidCurso,e.next=18,t.$axios.$put("/serviceCursoBorrador/miembro/publicar/".concat(o),body,n);case 18:t.errores={curso:null,unidades:[],clases:[]},t.existeErrores=!1,t.verificado=!1,t.buscandoErrores=!1,e.next=30;break;case 24:return e.prev=24,e.t1=e.catch(0),console.log("error",e.t1),e.next=29,t.$store.dispatch("modules/sistema/errorHandler",e.t1);case 29:e.sent;case 30:case"end":return e.stop()}}),e,null,[[0,24]])})))()}},mounted:function(){var t=this;return Object(y.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=x.b.firestore(),t.unsubscribe=r.collection("CursosEstadoPublicacion").doc(t.uidCurso).onSnapshot((function(e){e.exists&&(t.publicando=e.data().estado&&!e.data().fechaPublicado,!e.data().estado&&e.data().fechaPublicado&&(t.errores={curso:null,unidades:[],clases:[]},t.existeErrores=!1,t.verificado=!1,t.buscandoErrores=!1))}));case 2:case"end":return e.stop()}}),e)})))()},destroyed:function(){this.unsubscribe()}},E=(r(937),r(32)),component=Object(E.a)(k,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[t.publicando?e(l.a,{staticStyle:{height:"400px"}},[e(C.a,{staticClass:"fill-height",attrs:{"align-content":"center",justify:"center"}},[e("div",{staticStyle:{display:"block","margin-bottom":"-15px"}},[e(m.a,{attrs:{size:"70"}},[t._v("\n                    mdi-check-all\n                ")])],1),t._v(" "),e(c.a,{staticClass:"text-subtitle-1 text-center",staticStyle:{"margin-bottom":"-15px"},attrs:{cols:"12"}},[t._v("\n                Â¡Se esta publicando tu curso! ðŸš€\n            ")]),t._v(" "),e(c.a,{attrs:{cols:"6"}},[e(_.a,{attrs:{color:"deep-purple accent-4",indeterminate:"",rounded:"",height:"6"}})],1)],1)],1):e("div",[t.buscandoErrores?t._e():e(n.a,{staticStyle:{"margin-top":"-12px"},attrs:{outlined:"",prominent:"",border:"left",color:"#683bce"}},[e(C.a,{attrs:{align:"center"}},[e(c.a,{staticClass:"grow"},[t._v("\n                    Verificar el curso para publicar.\n                ")]),t._v(" "),e(c.a,{staticClass:"shrink"},[e(o.a,{attrs:{outlined:"",color:"#683bce"},on:{click:t.verificar}},[e(m.a,{attrs:{left:""}},[t._v("\n                            mdi-check-all\n                        ")]),t._v("\n                        Verificar\n                    ")],1)],1)],1)],1),t._v(" "),t.verificado&&!t.existeErrores?e(n.a,{staticStyle:{"margin-top":"-12px"},attrs:{outlined:"",prominent:"",border:"left",color:"#56C725"}},[e(C.a,{attrs:{align:"center"}},[e(c.a,{staticClass:"grow"},[t._v("\n                    Â¡Publica tu curso! ðŸš€\n                ")]),t._v(" "),e(c.a,{staticClass:"shrink"},[e(o.a,{attrs:{outlined:"",color:"#56C725"},on:{click:t.publicar}},[e(m.a,{attrs:{left:""}},[t._v("\n                            mdi-check-decagram\n                        ")]),t._v("\n                        Publicar\n                    ")],1)],1)],1)],1):t._e(),t._v(" "),t.buscandoErrores?e(l.a,{staticStyle:{height:"400px"}},[e(C.a,{staticClass:"fill-height",attrs:{"align-content":"center",justify:"center"}},[e(c.a,{staticClass:"text-subtitle-1 text-center",attrs:{cols:"12"}},[t._v("\n                    Verificando...\n                ")]),t._v(" "),e(c.a,{attrs:{cols:"6"}},[e(_.a,{attrs:{color:"deep-purple accent-4",indeterminate:"",rounded:"",height:"6"}})],1)],1)],1):e("div",[t.verificado?e("div",[t.existeErrores?e("div",{staticClass:"contenedor_contieneErrores"},[e(m.a,{attrs:{color:"#ff1d89",size:"70"}},[t._v("\n                        mdi-exclamation-thick\n                    ")]),t._v(" "),e("p",{staticClass:"mt-2",staticStyle:{"font-size":"25px"}},[t._v("\n                        Â¡Ups! Hay cosas que mejorar\n                    ")]),t._v(" "),e("div",{staticClass:"mt-8"},[t.errores.curso.mensajesError.length?e("div",{staticClass:"mb-8"},[e("h3",[t._v("Datos del curso")]),t._v(" "),e(f.a,{attrs:{focusable:""}},[e(d.a,[e(v.a,[t._v("\n                                        "+t._s(t.errores.curso.titulo)+"\n                                    ")]),t._v(" "),e(h.a,{staticClass:"mt-3"},t._l(t.errores.curso.mensajesError,(function(r,n){return e("p",{key:n},[t._v("\n                                            "+t._s(n+1)+". "+t._s(r)+"\n                                        ")])})),0)],1)],1)],1):t._e(),t._v(" "),t.errores.unidades.length?e("div",{staticClass:"mb-8"},[e("h3",[t._v("Unidades")]),t._v(" "),e(f.a,{attrs:{focusable:""}},t._l(t.errores.unidades,(function(r,n){return e(d.a,{key:n},[e(v.a,[t._v("\n                                        "+t._s(r.nombre)+" (U"+t._s(r.orden)+")\n                                    ")]),t._v(" "),e(h.a,t._l(r.errores,(function(r,n){return e("p",{key:n},[t._v("\n                                            "+t._s(n+1)+". "+t._s(r)+"\n                                        ")])})),0)],1)})),1)],1):t._e(),t._v(" "),t.errores.clases.length?e("div",{staticClass:"mb-8"},[e("h3",[t._v(" Clases y contenidos ")]),t._v(" "),e(f.a,{attrs:{focusable:""}},t._l(t.errores.clases,(function(r,n){return e(d.a,{key:n},[e(v.a,[t._v("\n                                        "+t._s(r.datosUnidad.nombreUnidad)+"(U"+t._s(r.datosUnidad.ordenUnidad)+")/"+t._s(r.nombre)+"(C"+t._s(r.orden)+")\n                                    ")]),t._v(" "),e(h.a,[e(C.a,{attrs:{"no-gutters":""}},[e(c.a,{attrs:{cols:"12",sm:"6"}},[e("h3",{staticClass:"mt-3 mb-1"},[t._v(" Clase ")]),t._v(" "),t._l(r.errores,(function(r,n){return e("p",{key:n},[t._v("\n                                                    "+t._s(n+1)+". "+t._s(r)+"\n                                                ")])}))],2),t._v(" "),e(c.a,{attrs:{cols:"12",sm:"6"}},[e("h3",{staticClass:"mt-3 mb-1"},[t._v(" Contenido ")]),t._v(" "),t._l(r.datosContenido.mensajesError,(function(r,n){return e("p",{key:n},[t._v("\n                                                    "+t._s(n+1)+". "+t._s(r)+"\n                                                ")])}))],2)],1)],1)],1)})),1)],1):t._e()])],1):e("div",{staticClass:"contenedor_publicar"},[e("div",{staticStyle:{display:"block"}},[e(m.a,{attrs:{size:"70"}},[t._v("\n                            mdi-check-all\n                        ")])],1),t._v(" "),e("p",{staticClass:"mt-2",staticStyle:{"font-size":"25px"}},[t._v("\n                        Â¡Verificado! Puedes publicar tu curso ðŸš€\n                    ")])])]):e("div",{staticClass:"contenedor_noVerificado"},[e(m.a,{attrs:{size:"70"}},[t._v("\n                    mdi-lock\n                ")]),t._v(" "),e("p",{staticClass:"mt-2",staticStyle:{"font-size":"25px"}},[t._v("\n                    Falta verificar el curso para publicar\n                ")])],1)])],1)],1)}),[],!1,null,"ac18be94",null);e.default=component.exports},576:function(t,e,r){"use strict";var n=r(5);e.a=n.a.extend({name:"transitionable",props:{mode:String,origin:String,transition:String}})},581:function(t,e,r){},624:function(t,e,r){"use strict";r(12),r(10),r(15),r(6),r(16),r(11),r(17);var n=r(3),o=(r(38),r(581),r(125)),c=r(120),l=r(43),d=r(57),h=r(19),v=r(576),f=r(8),m=r(13);function _(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function C(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?_(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):_(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}e.a=Object(f.a)(o.a,d.a,v.a).extend({name:"v-alert",props:{border:{type:String,validator:function(t){return["top","right","bottom","left"].includes(t)}},closeLabel:{type:String,default:"$vuetify.close"},coloredBorder:Boolean,dense:Boolean,dismissible:Boolean,closeIcon:{type:String,default:"$cancel"},icon:{default:"",type:[Boolean,String],validator:function(t){return"string"==typeof t||!1===t}},outlined:Boolean,prominent:Boolean,text:Boolean,type:{type:String,validator:function(t){return["info","error","success","warning"].includes(t)}},value:{type:Boolean,default:!0}},computed:{__cachedBorder:function(){if(!this.border)return null;var data={staticClass:"v-alert__border",class:Object(n.a)({},"v-alert__border--".concat(this.border),!0)};return this.coloredBorder&&((data=this.setBackgroundColor(this.computedColor,data)).class["v-alert__border--has-color"]=!0),this.$createElement("div",data)},__cachedDismissible:function(){var t=this;if(!this.dismissible)return null;var e=this.iconColor;return this.$createElement(c.a,{staticClass:"v-alert__dismissible",props:{color:e,icon:!0,small:!0},attrs:{"aria-label":this.$vuetify.lang.t(this.closeLabel)},on:{click:function(){return t.isActive=!1}}},[this.$createElement(l.a,{props:{color:e}},this.closeIcon)])},__cachedIcon:function(){return this.computedIcon?this.$createElement(l.a,{staticClass:"v-alert__icon",props:{color:this.iconColor}},this.computedIcon):null},classes:function(){var t=C(C({},o.a.options.computed.classes.call(this)),{},{"v-alert--border":Boolean(this.border),"v-alert--dense":this.dense,"v-alert--outlined":this.outlined,"v-alert--prominent":this.prominent,"v-alert--text":this.text});return this.border&&(t["v-alert--border-".concat(this.border)]=!0),t},computedColor:function(){return this.color||this.type},computedIcon:function(){return!1!==this.icon&&("string"==typeof this.icon&&this.icon?this.icon:!!["error","info","success","warning"].includes(this.type)&&"$".concat(this.type))},hasColoredIcon:function(){return this.hasText||Boolean(this.border)&&this.coloredBorder},hasText:function(){return this.text||this.outlined},iconColor:function(){return this.hasColoredIcon?this.computedColor:void 0},isDark:function(){return!(!this.type||this.coloredBorder||this.outlined)||h.a.options.computed.isDark.call(this)}},created:function(){this.$attrs.hasOwnProperty("outline")&&Object(m.a)("outline","outlined",this)},methods:{genWrapper:function(){var t=[this.$slots.prepend||this.__cachedIcon,this.genContent(),this.__cachedBorder,this.$slots.append,this.$scopedSlots.close?this.$scopedSlots.close({toggle:this.toggle}):this.__cachedDismissible];return this.$createElement("div",{staticClass:"v-alert__wrapper"},t)},genContent:function(){return this.$createElement("div",{staticClass:"v-alert__content"},this.$slots.default)},genAlert:function(){var data={staticClass:"v-alert",attrs:{role:"alert"},on:this.listeners$,class:this.classes,style:this.styles,directives:[{name:"show",value:this.isActive}]};this.coloredBorder||(data=(this.hasText?this.setTextColor:this.setBackgroundColor)(this.computedColor,data));return this.$createElement("div",data,[this.genWrapper()])},toggle:function(){this.isActive=!this.isActive}},render:function(t){var e=this.genAlert();return this.transition?t("transition",{props:{name:this.transition,origin:this.origin,mode:this.mode}},[e]):e}})},661:function(t,e,r){"use strict";r(15),r(6),r(12),r(109),r(36),r(357),r(547),r(87),r(121);var n=r(5);var o,c=r(108);e.a=(o="container",n.a.extend({name:"v-".concat(o),functional:!0,props:{id:String,tag:{type:String,default:"div"}},render:function(t,e){var r=e.props,data=e.data,n=e.children;data.staticClass="".concat(o," ").concat(data.staticClass||"").trim();var c=data.attrs;if(c){data.attrs={};var l=Object.keys(c).filter((function(t){if("slot"===t)return!1;var e=c[t];return t.startsWith("data-")?(data.attrs[t]=e,!1):e||"string"==typeof e}));l.length&&(data.staticClass+=" ".concat(l.join(" ")))}return r.id&&(data.domProps=data.domProps||{},data.domProps.id=r.id),t(r.tag,data,n)}})).extend({name:"v-container",functional:!0,props:{id:String,tag:{type:String,default:"div"},fluid:{type:Boolean,default:!1}},render:function(t,e){var r,n=e.props,data=e.data,o=e.children,l=data.attrs;return l&&(data.attrs={},r=Object.keys(l).filter((function(t){if("slot"===t)return!1;var e=l[t];return t.startsWith("data-")?(data.attrs[t]=e,!1):e||"string"==typeof e}))),n.id&&(data.domProps=data.domProps||{},data.domProps.id=n.id),t(n.tag,Object(c.a)(data,{staticClass:"container",class:Array({"container--fluid":n.fluid}).concat(r||[])}),o)}})},743:function(t,e,r){},937:function(t,e,r){"use strict";r(743)}}]);