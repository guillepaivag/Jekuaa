(window.webpackJsonp=window.webpackJsonp||[]).push([[110],{1073:function(t,e,o){"use strict";o.r(e);var r=o(165),n=o(241),c=o(513),d=o(562),l=o(512),_=o(202),m=o(561),v=o(18),P=(o(52),o(110).b.firestore()),f={name:"",middleware:"accesoAutenticado",data:function(){return{tipoProducto:this.$route.params.tipoProducto,uidProducto:this.$route.params.uidProducto,doc:null,data:null,hayDescuento:!1,esGratis:!1,loading:!1,pagado:!1,linkVerProducto:"/",linkComprarFiiPoints:"/",tieneParaComprar:!1}},methods:{toLocaleString:function(t){return new Date(1e3*t).toLocaleString()},pagar:function(){var t=this;return Object(v.a)(regeneratorRuntime.mark((function e(){var o,r,body,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.loading=!0,!(o=t.$firebase.auth().currentUser)){e.next=9;break}return e.next=6,o.getIdToken();case 6:e.t0=e.sent,e.next=10;break;case 9:e.t0="";case 10:return o=e.t0,e.next=13,t.$store.dispatch("modules/usuarios/setTOKEN",o);case 13:return r=[{tipoItem:t.tipoProducto,uidItem:t.uidProducto}],body={pedidos:r},n={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)}},e.next=18,t.$axios.$post("/servicePedido/generarPedidoProducto",body,n);case 18:e.sent,t.pagado=!0,"curso"===t.tipoProducto&&(t.linkVerProducto="/curso/".concat(t.data.codigo)),t.hayDescuento?t.$store.state.modules.usuarios.point-=t.data.datosPrecio.descuento.precio:t.$store.state.modules.usuarios.point-=t.data.datosPrecio.precio,t.$router.push(t.linkVerProducto),e.next=30;break;case 25:return e.prev=25,e.t1=e.catch(0),e.next=29,t.$store.dispatch("modules/sistema/errorHandler",e.t1);case 29:e.sent;case 30:return e.prev=30,t.loading=!1,e.finish(30);case 33:case"end":return e.stop()}}),e,null,[[0,25,30,33]])})))()}},created:function(){var t=this;return Object(v.a)(regeneratorRuntime.mark((function e(){var o,r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=0,"curso"!==t.tipoProducto){e.next=14;break}return e.next=4,P.collection("CursosPublicado").doc(t.uidProducto).get();case 4:if(t.doc=e.sent,t.doc.exists){e.next=8;break}return t.$router.push("/cursos"),e.abrupt("return");case 8:t.data=t.doc.data(),t.esGratis=0===t.data.datosPrecio.precio,o=t.data.datosPrecio.precio,t.data.datosPrecio.descuento&&(r=1e3*t.data.datosPrecio.descuento.fechaInicio.seconds,n=1e3*t.data.datosPrecio.descuento.fechaFin.seconds,t.hayDescuento=Date.now()>r&&Date.now()<n,t.hayDescuento&&(o=t.data.datosPrecio.descuento.precio)),e.next=15;break;case 14:t.$router.push("/");case 15:t.tieneParaComprar=t.$store.state.modules.usuarios.point>=o;case 16:case"end":return e.stop()}}),e)})))()}},h=(o(948),o(32)),component=Object(h.a)(f,(function(){var t=this,e=t._self._c;return e("div",{},[e(m.a,[e(d.a,{attrs:{cols:"12",md:"8"}},[e("div",{staticClass:"contenedor_izquierdo mt-8"},[e("h2",[t._v("Â¡Hola "+t._s(t.$store.state.modules.usuarios.nombreCompleto)+"!")]),t._v(" "),e("p",{staticClass:"mb-12"},[t._v("\n                    Â¡Solo falta confirmar tu pedido! ðŸš€\n                ")]),t._v(" "),e("h2",[t._v("Pedido:")]),t._v(" "),e(l.a),t._v(" "),t.data?e(n.a,{staticClass:"mt-5 pa-3"},[e(m.a,[e(d.a,{attrs:{cols:"12",sm:"5"}},[e(_.a,{attrs:{"max-height":"250","max-width":"400",src:t.data.fotoPerfil}})],1),t._v(" "),e(d.a,{attrs:{cols:"12",sm:"7"}},[e("h2",{staticClass:"mt-2"},[t._v(" "+t._s(t.data.titulo)+" ")]),t._v(" "),e(l.a,{staticClass:"my-3"}),t._v(" "),t.esGratis?e(c.a,{staticStyle:{"font-size":"17px"},attrs:{color:"#683bce",outlined:"",small:""}},[t._v("\n                                Â¡Gratis!\n                            ")]):t.hayDescuento?e("div",[e(c.a,{staticStyle:{"font-size":"17px"},attrs:{color:"#683bce",outlined:"",small:""}},[t._v("\n                                    "+t._s(t.data.datosPrecio.descuento.precio)+" FP\n                                ")]),t._v(" "),e("b",{staticClass:"ml-1 text-decoration-line-through",staticStyle:{color:"#aaaaaa","font-size":"16px"}},[t._v("\n                                    "+t._s(t.data.datosPrecio.precio)+" FP\n                                ")])],1):e(c.a,{staticStyle:{"font-size":"17px"},attrs:{color:"#683bce",outlined:"",small:""}},[t._v("\n                                "+t._s(t.data.datosPrecio.precio)+" FP\n                            ")])],1)],1)],1):t._e()],1)]),t._v(" "),e(d.a,{staticClass:"resumen white--text",attrs:{cols:"12",md:"4"}},[e("div",{staticClass:"contenedor_derecho mt-5"},[e("h2",{staticStyle:{"font-size":"28px"}},[t._v("Resumen:")]),t._v(" "),e(l.a),t._v(" "),t.data?e("div",{staticClass:"mt-7"},[e("p",{staticStyle:{"margin-bottom":"0","font-size":"18px"}},[e("b",[t._v("Precio original:")]),t._v(" "+t._s(t.data.datosPrecio.precio)+" FP\n                    ")]),t._v(" "),t.hayDescuento?e("p",{staticStyle:{"margin-bottom":"0","font-size":"18px"}},[e("b",[t._v("Porcentaje de descuento:")]),t._v(" "+t._s(100*t.data.datosPrecio.descuento.porcentaje)+"%\n                    ")]):t._e(),t._v(" "),t.hayDescuento?e("p",{staticStyle:{"margin-bottom":"0","font-size":"18px"}},[e("b",[t._v("Precio con descuento:")]),t._v(" "+t._s(t.data.datosPrecio.descuento.precio)+" FP\n                    ")]):t._e(),t._v(" "),t.hayDescuento?e("p",{staticStyle:{"margin-bottom":"0","font-size":"18px"}},[e("b",[t._v("Fecha fin de descuento:")]),t._v(" "+t._s(t.toLocaleString(t.data.datosPrecio.descuento.fechaFin.seconds))+"\n                    ")]):t._e(),t._v(" "),e(l.a,{staticClass:"my-3"}),t._v(" "),e("div",{staticClass:"mb-10"},[e("b",{staticStyle:{"font-size":"24px"}},[t._v("\n                            Precio total: \n                            "+t._s(t.hayDescuento?t.data.datosPrecio.descuento.precio:t.data.datosPrecio.precio)+" FP\n                        ")])]),t._v(" "),t.tieneParaComprar?t._e():e("p",{staticClass:"text-center",staticStyle:{"margin-bottom":"0"}},[t._v("\n                        Â¡Ohh no! No tienes suficiente FiiPoints\n                    ")]),t._v(" "),t.tieneParaComprar?t._e():e(r.a,{staticClass:"white--text mb-5",attrs:{block:"",color:"#683bce",to:t.linkComprarFiiPoints}},[t._v("\n                        Â¡Comprar FiiPoints!\n                    ")]),t._v(" "),t.tieneParaComprar&&!t.pagado?e(r.a,{staticClass:"white--text mb-5",attrs:{block:"",loading:t.loading,disabled:t.loading,color:"#683bce"},on:{click:t.pagar}},[t._v("\n                        Pagar e inscribirme\n                    ")]):t.tieneParaComprar&&t.pagado?e(r.a,{staticClass:"white--text mb-5",attrs:{block:"",color:"#683bce",to:t.linkVerProducto}},[t._v("\n                        Ver producto\n                    ")]):t._e(),t._v(" "),e("p",{staticStyle:{"font-size":"16px","margin-top":"-5px"}},[t._v("\n                        Al inscribirte aceptas estas "),e("nuxt-link",{staticStyle:{color:"#683bce"},attrs:{to:"/",target:"_blank"}},[t._v("Condiciones de uso.")])],1),t._v(" "),e("nuxt-link",{staticStyle:{color:"#ffffff"},attrs:{to:"/",target:"_blank"}},[t._v("\n                        Â¿QuÃ© son los FiiPoints (FP)?\n                    ")])],1):t._e()],1)])],1)],1)}),[],!1,null,"9c25f0f6",null);e.default=component.exports},753:function(t,e,o){},948:function(t,e,o){"use strict";o(753)}}]);