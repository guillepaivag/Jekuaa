(window.webpackJsonp=window.webpackJsonp||[]).push([[55,33,51],{1075:function(e,t,n){"use strict";n.r(t);var r=n(568),o=n(556),c=n(557),l=n(165),d=n(241),m=n(76),v=n(562),f=n(585),_=n(512),h=n(232),x=n(1089),w=n(561),C=n(526),k=n(18),B=(n(52),n(591)),R=n.n(B),G=n(779),U=n(595),y={name:"",data:function(){return{referenciaBlog:"",blog:{},contenidoBlog:"",meGustaEsteBlog:!1,dialogRegistro:!1}},components:{"carta-presentacion":n(780).default,"visualizador-blog":U.default,RecomendacionPorSimilitud:G.default},methods:{accionMeGusta:function(){var e=this;return Object(k.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.verificarSiInicioSesion()){t.next=3;break}return e.dialogRegistro=!0,t.abrupt("return");case 3:if(!e.meGustaEsteBlog){t.next=7;break}return t.next=6,e.quitarMeGusta();case 6:return t.abrupt("return");case 7:return t.next=9,e.darMeGusta();case 9:case"end":return t.stop()}}),t)})))()},darMeGusta:function(){var e=this;return Object(k.a)(regeneratorRuntime.mark((function t(){var n,r,body,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,n=e.$firebase.auth().currentUser){t.next=4;break}return t.abrupt("return",null);case 4:return t.next=6,n.getIdToken();case 6:r=t.sent,e.$store.commit("modules/usuarios/setTOKEN",r),body={meGusta:!0},o={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},e.$axios.post("/serviceBlog/meGusta/".concat(e.blog.uid),body,o),e.meGustaEsteBlog=!0,e.blog.cantidadMeGusta++,t.next=18;break;case 15:t.prev=15,t.t0=t.catch(0),console.log("error: ",t.t0);case 18:case"end":return t.stop()}}),t,null,[[0,15]])})))()},quitarMeGusta:function(){var e=this;return Object(k.a)(regeneratorRuntime.mark((function t(){var n,r,body,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,n=e.$firebase.auth().currentUser){t.next=4;break}return t.abrupt("return",null);case 4:return t.next=6,n.getIdToken();case 6:r=t.sent,e.$store.commit("modules/usuarios/setTOKEN",r),body={meGusta:!1},o={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},e.$axios.post("/serviceBlog/meGusta/".concat(e.blog.uid),body,o),e.meGustaEsteBlog=!1,e.blog.cantidadMeGusta--,t.next=18;break;case 15:t.prev=15,t.t0=t.catch(0),console.log("error: ",t.t0);case 18:case"end":return t.stop()}}),t,null,[[0,15]])})))()},verificarSiInicioSesion:function(){return!!this.$store.state.modules.usuarios.uid}},computed:{},created:function(){var e=this;return Object(k.a)(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((n=e.$store.state.modules.usuarios).uid){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,e.$firebase.firestore().collection("Usuarios").doc(n.uid).collection("BlogsMG").doc(e.blog.uid).get();case 5:r=t.sent,e.meGustaEsteBlog=!!r.exists;case 7:case"end":return t.stop()}}),t)})))()},asyncData:function(e){return Object(k.a)(regeneratorRuntime.mark((function t(){var n,r,o,c,l,d,m,v,f,_,h,x,w,C;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.app,n=e.$firebase,r=e.$axios,o=e.redirect,c=e.params,l=c.referencia,d={},m="",v=[{text:"Inicio",disabled:!1,href:"/"},{text:"Blogs",disabled:!1,href:"/blogs"}],t.prev=5,f=n.firestore().collection("Blogs").where("referencia","==",l).where("habilitado","==",!0).where("publicado","==",!0),t.next=9,f.get();case 9:return(_=t.sent).empty&&o("/blogs"),h=_.docs[0],d=h.data(),console.log("blog",d),x={headers:{"Content-Type":"application/json"}},t.next=17,r.get("/serviceBlog/obtenerContenido/".concat(d.uid),x);case 17:return w=t.sent,C=new R.a.Converter,m=C.makeHtml(w.data.resultado),v.push({text:d.titulo,disabled:!0,href:"/blog/".concat(d.referencia)}),t.abrupt("return",{referenciaBlog:l,blog:d,contenidoBlog:m,breadcrumbs:v});case 24:t.prev=24,t.t0=t.catch(5),console.log("err",t.t0),o("/blogs");case 28:case"end":return t.stop()}}),t,null,[[5,24]])})))()}},O=(n(953),n(32)),component=Object(O.a)(y,(function(){var e=this,t=e._self._c;return t("div",[t(x.a,{attrs:{dark:"",src:n(570)("./".concat(e.blog.seccion?e.blog.seccion:"sin-seccion",".webp")),height:"350"}}),e._v(" "),t("div",{staticClass:"container mb-5"},[t("div",{staticClass:"mb-5"},[t(r.a,e._l(e.breadcrumbs,(function(n,r){return t("div",{key:r},[t(c.a,{attrs:{href:n.href,disabled:n.disabled,nuxt:!0}},[e._v("\n                        "+e._s(n.text.toUpperCase())+"\n                    ")]),e._v(" "),r!==e.breadcrumbs.length-1?t(o.a,[t(h.a,[e._v("mdi-chevron-right")])],1):e._e()],1)})),0)],1),e._v(" "),t("div",{staticClass:"contenedor_contenido_padre mb-6"},[t("h2",{staticStyle:{"text-align":"center"}},[e._v("\n                "+e._s(e.blog.titulo)+"\n            ")])]),e._v(" "),t(l.a,{staticClass:"iconoMeGusta",attrs:{icon:"",color:e.meGustaEsteBlog?"#ff1d89":"",disabled:!e.$store.state.modules.usuarios.emailVerificado},on:{click:e.accionMeGusta}},[t(h.a,[e._v("mdi-heart")])],1),e._v("\n        "+e._s(e.blog.cantidadMeGusta)+"\n\n        "),t(_.a,{}),e._v(" "),t("div",{},[t("visualizador-blog",{attrs:{contenido:e.contenidoBlog}})],1),e._v(" "),t(_.a,{}),e._v(" "),t(l.a,{staticClass:"iconoMeGusta",attrs:{icon:"",color:e.meGustaEsteBlog?"#ff1d89":"",disabled:!e.$store.state.modules.usuarios.emailVerificado},on:{click:e.accionMeGusta}},[t(h.a,[e._v("mdi-heart")])],1),e._v("\n        "+e._s(e.blog.cantidadMeGusta)+"\n\n        "),t(w.a,{staticClass:"mt-7 mb-0"},[t(v.a,{attrs:{cols:"12",sm:"6"}},[t("div",{},[t("h2",{staticClass:"subtitulos"},[e._v(" Descripción: ")]),e._v(" "),t(_.a,{staticClass:"mt-3 mb-3"}),e._v("\n                    "+e._s(e.blog.descripcion)+"\n                ")],1)]),e._v(" "),t(v.a,{attrs:{cols:"12",sm:"3"}},[t("div",{},[t("h2",{staticClass:"subtitulos"},[e._v(" Fecha creación: ")]),e._v(" "),t(_.a,{staticClass:"mt-3 mb-3"}),e._v("\n                    "+e._s(new Date(1e3*e.blog.fechaCreacion.seconds).toISOString().substr(0,10))+"\n                ")],1)]),e._v(" "),t(v.a,{attrs:{cols:"12",sm:"3"}},[t("div",{},[t("h2",{staticClass:"subtitulos"},[e._v(" Fecha actualización: ")]),e._v(" "),t(_.a,{staticClass:"mt-3 mb-3"}),e._v("\n                    "+e._s(new Date(1e3*e.blog.fechaActualizacion.seconds).toISOString().substr(0,10))+"\n                ")],1)])],1)],1),e._v(" "),t("ClientOnly",[t("div",{staticClass:"container mb-5"},[t("RecomendacionPorSimilitud",{attrs:{uidBlog:e.blog.uid}})],1)]),e._v(" "),t("div",{staticClass:"mb-15"},[t("carta-presentacion",{attrs:{uidUsuario:e.blog.publicador}})],1),e._v(" "),t(f.a,{attrs:{width:"500"},model:{value:e.dialogRegistro,callback:function(t){e.dialogRegistro=t},expression:"dialogRegistro"}},[t(d.a,[t(m.d,{staticClass:"text-h6 cabecera_registro"},[e._v("\n                Primero debes iniciar sesión\n            ")]),e._v(" "),t(m.c,[t("p",[e._v("Para dar "),t("b",[e._v("me gusta")]),e._v(" a este blog de Classfii debes registrarte o iniciar sesión.")]),e._v(" "),t(_.a,{staticClass:"mb-6"}),e._v(" "),t("p",[e._v("Si tienes una cuenta en Classfii puedes iniciar sesión "),t("nuxt-link",{attrs:{to:"/autenticacion/inicioSesion"}},[e._v("aquí")]),e._v(".")],1),e._v(" "),t("p",[e._v("En caso que no tengas una cuenta en Classfii puedes registrarte "),t("nuxt-link",{attrs:{to:"/autenticacion/registro"}},[e._v("aquí")])],1)],1),e._v(" "),t(_.a),e._v(" "),t(m.a,[t(C.a),e._v(" "),t(l.a,{attrs:{color:"#683bce",text:""},on:{click:function(t){e.dialogRegistro=!1}}},[e._v("\n                Cerrar\n            ")])],1)],1)],1)],1)}),[],!1,null,"0154b20e",null);t.default=component.exports},570:function(e,t,n){var map={"./informatica.webp":571,"./marketing.webp":572,"./matematica.webp":573,"./sin-seccion.webp":574};function r(e){var t=o(e);return n(t)}function o(e){if(!n.o(map,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return map[e]}r.keys=function(){return Object.keys(map)},r.resolve=o,e.exports=r,r.id=570},571:function(e,t,n){e.exports=n.p+"img/informatica.fa3c667.webp"},572:function(e,t,n){e.exports=n.p+"img/marketing.54862fd.webp"},573:function(e,t,n){e.exports=n.p+"img/matematica.761aff7.webp"},574:function(e,t,n){e.exports=n.p+"img/sin-seccion.b6dd829.webp"},575:function(e,t,n){},590:function(e,t,n){"use strict";n(575)},595:function(e,t,n){"use strict";n.r(t);var r={name:"visualizador-blog",props:{contenido:String}},o=(n(590),n(32)),component=Object(o.a)(r,(function(){var e=this;return(0,e._self._c)("div",{staticClass:"ProseMirror contenedorVisualizador mt-5 mb-5",domProps:{innerHTML:e._s(e.contenido)}})}),[],!1,null,"794a4749",null);t.default=component.exports},604:function(e,t,n){e.exports=n.p+"img/portada_usuario.25caae9.png"},641:function(e,t,n){},642:function(e,t,n){},683:function(e,t,n){"use strict";n(641)},684:function(e,t,n){"use strict";n(642)},755:function(e,t,n){},779:function(e,t,n){"use strict";n.r(t);var r=n(241),o=n(202),c=n(18),l=(n(52),n(110)),d=n(584),m=n.n(d),v=l.b.firestore(),f=m()("RNRNTDZS3N","af4d4e9d36a7ceb75e258007c3ceccf2"),_={name:"",data:function(){return{datosBlog:null,blogsRecomendados:[]}},props:{uidBlog:{type:String,require:!0}},methods:{getTitulo:function(e){return e.length>35?e.substring(0,35)+"...":e}},created:function(){var e=this;return Object(c.a)(regeneratorRuntime.mark((function t(){var n,data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.collection("Blogs").doc(e.uidBlog).get();case 2:return n=t.sent,e.datosBlog=n.data(),t.next=6,f.getRelatedProducts([{indexName:"prod_blogs",objectID:e.uidBlog,maxRecommendations:12}]);case 6:data=t.sent,e.blogsRecomendados=data.results[0].hits;case 8:case"end":return t.stop()}}),t)})))()}},h=(n(683),n(32)),component=Object(h.a)(_,(function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"mb-3"},[t("h2",[e._v("\n            Blogs similares a \n            "),e.datosBlog?t("nuxt-link",{staticClass:"porqueVisteTitulo",attrs:{to:"/blog/".concat(e.datosBlog.referencia)}},[e._v("\n                "+e._s(e.datosBlog.titulo)+"\n            ")]):e._e()],1)]),e._v(" "),t("div",{staticClass:"horizontal_slider"},[t("div",{staticClass:"slider_container"},e._l(e.blogsRecomendados,(function(c,l){return t(r.a,{key:l,staticClass:"item pl-4 pt-7 white--text",attrs:{to:"/blog/".concat(c.referencia)}},[t(o.a,{staticStyle:{display:"inline-block","margin-bottom":"-12px"},attrs:{height:"35","max-width":"35",src:n(353)}}),e._v(" "),t("h2",{staticClass:"styleTitulo ml-2",staticStyle:{display:"inline-block"},attrs:{title:c.titulo}},[e._v("\n                    "+e._s(e.getTitulo(c.titulo))+"\n                ")])],1)})),1)])])}),[],!1,null,"32c91ba0",null);t.default=component.exports},780:function(e,t,n){"use strict";n.r(t);var r=n(165),o=n(241),c=n(76),l=n(512),d=n(90),m=n(232),v=n(202),f=n(526),_=n(18),h=(n(52),n(28),n(81),{name:"carta-presentacion",data:function(){return{informacionUsuario:null,usuario:null,show:!1}},props:{uidUsuario:String},methods:{getRolDescriptivo:function(e){return"estudiante"===e?"Estudiante de Classfii":e}},computed:{descripcion:function(){return this.informacionUsuario.descripcion.replace(/\n/g,"<br>")}},created:function(){var e=this;return Object(_.a)(regeneratorRuntime.mark((function t(){var n,r,o,c,l,d;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.$firebase.firestore().collection("Usuarios").doc(e.uidUsuario),t.next=3,n.get();case 3:return r=t.sent,e.usuario=r.data(),o={headers:{"Content-Type":"application/json"}},t.next=8,e.$axios.$get("/serviceUsuario/obtenerAuthentication/uid/".concat(e.uidUsuario),o);case 8:return c=t.sent,e.usuario.nombreCompleto=c.resultado.displayName,l=e.$firebase.firestore().collection("InformacionUsuarios").doc(e.uidUsuario),t.next=13,l.get();case 13:d=t.sent,e.informacionUsuario=d.data();case 15:case"end":return t.stop()}}),t)})))()}}),x=(n(684),n(32)),component=Object(x.a)(h,(function(){var e=this,t=e._self._c;return e.usuario&&e.informacionUsuario?t("div",{staticClass:"container"},[t("h3",{staticClass:"mb-5 titulo-presentacion"},[e._v("\n        Presentación del publicador:\n    ")]),e._v(" "),t("div",[t(o.a,{staticClass:"mx-auto"},[t(v.a,{attrs:{src:n(604),height:"200px"}}),e._v(" "),t(c.d,[e._v("\n                ¡Hola, soy "),t("b",{staticClass:"texto-nombreCompleto ml-1"},[e._v(" "+e._s(e.usuario.nombreCompleto)+"!")])]),e._v(" "),t(c.b,[e._v("\n                "+e._s(e.usuario.nombreUsuario)+" - "+e._s(e.getRolDescriptivo(e.informacionUsuario.rolDescriptivo))+"\n            ")]),e._v(" "),t(c.a,[t(r.a,{attrs:{color:"#683bce",text:"",to:"/estudiante/".concat(e.usuario.nombreUsuario)}},[e._v("\n                Mi perfil\n            ")]),e._v(" "),t(f.a),e._v(" "),t(r.a,{attrs:{color:"#683bce",text:""},on:{click:function(t){e.show=!e.show}}},[t("b",[e._v("Información")]),e._v(" "),t(m.a,[e._v(e._s(e.show?"mdi-chevron-up":"mdi-chevron-down"))])],1)],1),e._v(" "),t(d.a,[t("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}]},[t(l.a),e._v(" "),t(c.c,{domProps:{innerHTML:e._s(e.descripcion)}})],1)])],1)],1)]):e._e()}),[],!1,null,"8acdb4e8",null);t.default=component.exports},953:function(e,t,n){"use strict";n(755)}}]);