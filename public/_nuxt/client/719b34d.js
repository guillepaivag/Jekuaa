(window.webpackJsonp=window.webpackJsonp||[]).push([[114,48],{1034:function(e,t,r){"use strict";r.r(t);var o=r(570),n=r(558),c=r(559),l=r(165),m=r(241),d=r(76),h=r(564),f=r(1021),v=r(587),x=r(514),O=r(232),$=r(202),y=r(167),C=r(238),k=r(7),_=r(516),w=r(235),j=r(563),N=r(517),P=r(18),D=(r(52),r(210),r(209),r(12),r(690)),F=r(580),S=r(581),U=r(110),A={mixins:[F.validationMixin],validations:{nombreUsuario:{required:S.required,minLength:Object(S.minLength)(1),maxLength:Object(S.maxLength)(20)},nombreCompleto:{minLength:Object(S.minLength)(1),maxLength:Object(S.maxLength)(100)},correo:{required:S.required,email:S.email,minLength:Object(S.minLength)(5),maxLength:Object(S.maxLength)(100)},fechaNacimientoString:{}},data:function(){return{menuFechaNacimiento:!1,nombreUsuario:"",nombreCompleto:"",correo:"",fechaNacimiento:null,fechaNacimientoString:"",breadcrumbs:[{text:"Inicio",disabled:!1,href:"/"},{text:"Perfil",disabled:!0,href:"/perfil"}],proveedores:[],processing:{value:!1,message:""}}},components:{"foto-perfil":D.default},watch:{fechaNacimientoString:function(e,t){e&&(this.fechaNacimiento=new Date("".concat(e,"T05:00:00.000Z")).getTime())}},methods:{quitarProveedor:function(e){var t=this;return Object(P.a)(regeneratorRuntime.mark((function r(){var o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,t.processing.value=!0,t.processing.message="Desvinculando proveedor. Favor esperar.",r.next=5,U.b.auth().currentUser.unlink(e);case 5:o=t.proveedores.findIndex((function(t){return t.providerId===e})),t.proveedores.splice(o,1),r.next=11;break;case 9:r.prev=9,r.t0=r.catch(0);case 11:return r.prev=11,t.processing.value=!1,t.processing.message="",r.finish(11);case 15:case"end":return r.stop()}}),r,null,[[0,9,11,15]])})))()},datosActualizados:function(){var e=this.$store.state.modules.usuarios,t={},r="";this.nombreCompleto!==e.nombreCompleto&&(r=this.nombreCompleto),this.nombreUsuario!==e.nombreUsuario&&(t.nombreUsuario=this.nombreUsuario),this.correo!==e.correo&&(t.correo=this.correo);var o=e.fechaNacimiento?e.fechaNacimiento.getTime():null;return this.fechaNacimiento!==o&&(t.fechaNacimiento=this.fechaNacimiento),{nombreCompleto:r,datosUsuario:t}},actualizar:function(){var e=this;return Object(P.a)(regeneratorRuntime.mark((function t(){var r,o,n,c,body,l,m,d,h;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.processing.value=!0,e.processing.message="Actualizando usuario. Favor esperar.",r=e.datosActualizados(),o=r.nombreCompleto,n=r.datosUsuario,t.prev=3,!(c=e.$firebase.auth().currentUser)){t.next=11;break}return t.next=8,c.getIdToken();case 8:t.t0=t.sent,t.next=12;break;case 11:t.t0="";case 12:return c=t.t0,t.next=15,e.$store.dispatch("modules/usuarios/setTOKEN",c);case 15:return body={},o&&(body.nombreCompleto=o),Object.keys(n).length&&(body.datosUsuario=n),l={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)}},t.next=21,e.$axios.$put("/serviceUsuario/actualizarUsuario",body,l);case 21:if(t.sent,!n||!n.correo){t.next=26;break}return t.next=25,e.$store.dispatch("modules/usuarios/logout");case 25:e.$router.push("/");case 26:m=e.$store.state.modules.usuarios,e.nombreUsuario!==m.nombreUsuario&&e.$store.commit("modules/usuarios/setNombreUsuario",e.nombreUsuario),e.nombreCompleto!==m.nombreCompleto&&e.$store.commit("modules/usuarios/setNombreCompleto",e.nombreCompleto),e.correo!==m.correo&&e.$store.commit("modules/usuarios/setCorreo",e.correo),d=m.fechaNacimiento?m.fechaNacimiento.getTime():null,h=e.fechaNacimiento?new Date("".concat(e.fechaNacimientoString,"T05:00:00.000Z")):null,e.fechaNacimiento!==d&&e.$store.commit("modules/usuarios/setFechaNacimiento",h),t.next=40;break;case 35:return t.prev=35,t.t1=t.catch(3),t.next=39,e.$store.dispatch("modules/sistema/errorHandler",t.t1);case 39:t.sent;case 40:return t.prev=40,e.processing.value=!1,e.processing.message="",t.finish(40);case 44:case"end":return t.stop()}}),t,null,[[3,35,40,44]])})))()},reiniciar:function(){var e=this.$store.state.modules.usuarios;this.nombreUsuario=e.nombreUsuario,this.nombreCompleto=e.nombreCompleto,this.correo=e.correo,this.fechaNacimiento=e.fechaNacimiento?e.fechaNacimiento.getTime():null,this.fechaNacimientoString=e.fechaNacimiento?new Date(this.fechaNacimiento-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10):""},getNombreProveedor:function(e){return"facebook.com"===e?"Facebook":"google.com"===e?"Google":"password"===e?"Correo/Contraseña":void 0}},computed:{erroresNombreUsuario:function(){var e=[];return this.$v.nombreUsuario.$dirty?(!this.$v.nombreUsuario.required&&e.push("Nombre de usuario es requerido."),!this.$v.nombreUsuario.maxLength&&e.push("La cantidad máxima es 20 caracteres."),!this.$v.nombreUsuario.minLength&&e.push("La cantidad mínima es 1 catacter."),e):e},erroresNombreCompleto:function(){var e=[];return this.$v.nombreCompleto.$dirty?(!this.$v.nombreCompleto.maxLength&&e.push("La cantidad máxima es 100 caracteres."),!this.$v.nombreCompleto.minLength&&e.push("La cantidad mínima es 1 caracter."),e):e},erroresCorreo:function(){var e=[];return this.$v.correo.$dirty?(!this.$v.correo.email&&e.push("El correo debe ser válido."),!this.$v.correo.required&&e.push("El correo es requerido."),!this.$v.correo.maxLength&&e.push("La cantidad máxima es 100 caracteres."),!this.$v.correo.minLength&&e.push("La cantidad mínima es 5 caracteres."),e):e},erroresFechaNacimientoString:function(){var e=[];return this.$v.fechaNacimientoString.$dirty,e}},created:function(){this.reiniciar(),this.proveedores=this.$firebase.auth().currentUser.providerData}},T=(r(840),r(32)),component=Object(T.a)(A,(function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"mt-0 mb-3"},[t(o.a,e._l(e.breadcrumbs,(function(r,o){return t("div",{key:o},[t(c.a,{attrs:{href:r.href,disabled:r.disabled,nuxt:!0}},[e._v("\n                  "+e._s(r.text.toUpperCase())+"\n              ")]),e._v(" "),o!==e.breadcrumbs.length-1?t(n.a,[t(O.a,[e._v("mdi-chevron-right")])],1):e._e()],1)})),0)],1),e._v(" "),t("form",[t(j.a,{staticClass:"mb-10"},[t(h.a,{attrs:{cols:"12"}},[t("h1",{staticClass:"titulo"},[e._v("Mi perfil")]),e._v(" "),t(l.a,{staticClass:"ml-4 mb-3",attrs:{outlined:"",color:"#683bce",to:"/estudiante/".concat(e.$store.state.modules.usuarios.nombreUsuario)}},[e._v("\n          Ver mi perfil\n        ")])],1),e._v(" "),t(h.a,{attrs:{cols:"12",lg:"4"}},[t("div",{staticClass:"container imagenAvatar mt-5"},[t("foto-perfil")],1)]),e._v(" "),t(h.a,{attrs:{cols:"12",lg:"8"}},[t(N.a,{staticClass:"mt-5 mb-5",attrs:{"error-messages":e.erroresNombreUsuario,counter:20,label:"Nombre usuario",required:""},on:{input:function(t){return e.$v.nombreUsuario.$touch()},blur:function(t){return e.$v.nombreUsuario.$touch()}},model:{value:e.nombreUsuario,callback:function(t){e.nombreUsuario=t},expression:"nombreUsuario"}}),e._v(" "),t(N.a,{staticClass:"mt-5 mb-5",attrs:{"error-messages":e.erroresNombreCompleto,counter:100,label:"Nombre completo",required:""},on:{input:function(t){return e.$v.nombreCompleto.$touch()},blur:function(t){return e.$v.nombreCompleto.$touch()}},model:{value:e.nombreCompleto,callback:function(t){e.nombreCompleto=t},expression:"nombreCompleto"}}),e._v(" "),t(N.a,{staticClass:"mt-5 mb-5",attrs:{"error-messages":e.erroresCorreo,label:"Correo",counter:100,required:""},on:{input:function(t){return e.$v.correo.$touch()},blur:function(t){return e.$v.correo.$touch()}},model:{value:e.correo,callback:function(t){e.correo=t},expression:"correo"}}),e._v(" "),t(_.a,{attrs:{"close-on-content-click":!1,"max-width":"290"},scopedSlots:e._u([{key:"activator",fn:function(r){var o=r.on,n=r.attrs;return[t(N.a,e._g(e._b({attrs:{value:e.fechaNacimientoString,clearable:"",label:"Fecha de nacimiento"},on:{"click:clear":function(t){e.fechaNacimientoString=""}}},"v-text-field",n,!1),o))]}}]),model:{value:e.menuFechaNacimiento,callback:function(t){e.menuFechaNacimiento=t},expression:"menuFechaNacimiento"}},[e._v(" "),t(f.a,{attrs:{"no-title":""},on:{change:function(t){e.menu1=!1}},model:{value:e.fechaNacimientoString,callback:function(t){e.fechaNacimientoString=t},expression:"fechaNacimientoString"}})],1),e._v(" "),t("div",{staticClass:"botones mt-5"},[t(l.a,{staticClass:"mr-4",attrs:{text:"",color:"#683bce",disabled:e.$v.$anyError},on:{click:e.actualizar}},[e._v("\n            Actualizar mis datos\n          ")]),e._v(" "),t(l.a,{attrs:{text:"",color:"#ff1d89"},on:{click:e.reiniciar}},[e._v("\n            Reiniciar\n          ")])],1)],1)],1)],1),e._v(" "),t(v.a,{attrs:{persistent:"",width:"300"},model:{value:e.processing.value,callback:function(t){e.$set(e.processing,"value",t)},expression:"processing.value"}},[t(m.a,{attrs:{color:"#683bce",dark:""}},[t(d.c,{staticClass:"pt-3"},[e._v("\n              "+e._s(e.processing.message)+"\n              "),t(w.a,{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)],1)],1),e._v(" "),t(x.a),e._v(" "),t("div",{staticClass:"mt-10"},[t("p",{staticClass:"text-h6 text--primary"},[e._v("\n      Tienes "+e._s(e.proveedores.length)+" "+e._s(1!==e.proveedores.length?"proveedores":"proveedor")+":\n    ")]),e._v(" "),e._l(e.proveedores,(function(o,n){return t(m.a,{key:n,staticClass:"mx-auto mb-5",attrs:{"max-width":"600",outlined:""}},["password"!==o.providerId?t("div"):e._e(),e._v(" "),t(y.a,{attrs:{"three-line":""}},[t(k.a,[t(k.c,{staticClass:"text-h5 mb-1"},[e._v("\n            "+e._s(e.getNombreProveedor(o.providerId))+"\n          ")]),e._v(" "),t(k.b,[e._v("\n            Correo: "+e._s(o.email)+"\n          ")]),e._v(" "),t(k.b,[e._v("\n            Nombre: "+e._s(o.displayName)+"\n          ")])],1),e._v(" "),t(C.a,{attrs:{tile:"",size:"80",color:"grey"}},[o.photoURL?t($.a,{attrs:{src:o.photoURL}}):t($.a,{attrs:{src:r(614)}})],1)],1),e._v(" "),t(d.a,[t(l.a,{attrs:{disabled:1===e.proveedores.length||"password"!==o.providerId&&!e.$store.state.modules.usuarios.emailVerificado,outlined:"",rounded:"",text:"",color:"red"},on:{click:function(t){return e.quitarProveedor(o.providerId)}}},[e._v("\n          Desvincular\n        ")])],1)],1)}))],2)],1)}),[],!1,null,"443570f3",null);t.default=component.exports;installComponents(component,{FotoPerfil:r(690).default})},557:function(e,t,r){},558:function(e,t,r){"use strict";var o=r(2);t.a=Object(o.i)("v-breadcrumbs__divider","li")},559:function(e,t,r){"use strict";r(12),r(10),r(15),r(6),r(16),r(11),r(17);var o=r(3),n=r(53),c=r(8);function l(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function m(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}t.a=Object(c.a)(n.a).extend({name:"v-breadcrumbs-item",props:{activeClass:{type:String,default:"v-breadcrumbs__item--disabled"},ripple:{type:[Boolean,Object],default:!1}},computed:{classes:function(){return Object(o.a)({"v-breadcrumbs__item":!0},this.activeClass,this.disabled)}},render:function(e){var t=this.generateRouteLink(),r=t.tag,data=t.data;return e("li",[e(r,m(m({},data),{},{attrs:m(m({},data.attrs),{},{"aria-current":this.isActive&&this.isLink?"page":void 0})}),this.$slots.default)])}})},566:function(e,t,r){},570:function(e,t,r){"use strict";r(12),r(10),r(15),r(6),r(16),r(11),r(17);var o=r(3),n=(r(121),r(557),r(559)),c=r(558),l=r(19),m=r(8);function d(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}t.a=Object(m.a)(l.a).extend({name:"v-breadcrumbs",props:{divider:{type:String,default:"/"},items:{type:Array,default:function(){return[]}},large:Boolean},computed:{classes:function(){return function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({"v-breadcrumbs--large":this.large},this.themeClasses)}},methods:{genDivider:function(){return this.$createElement(c.a,this.$slots.divider?this.$slots.divider:this.divider)},genItems:function(){for(var e=[],t=!!this.$scopedSlots.item,r=[],i=0;i<this.items.length;i++){var o=this.items[i];r.push(o.text),t?e.push(this.$scopedSlots.item({item:o})):e.push(this.$createElement(n.a,{key:r.join("."),props:o},[o.text])),i<this.items.length-1&&e.push(this.genDivider())}return e}},render:function(e){var t=this.$slots.default||this.genItems();return e("ul",{staticClass:"v-breadcrumbs",class:this.classes},t)}})},587:function(e,t,r){"use strict";var o=r(78),n=r(3),c=(r(24),r(87),r(62),r(38),r(60),r(6),r(111),r(12),r(10),r(15),r(16),r(11),r(17),r(566),r(530)),l=r(149),m=r(176),d=r(261),h=r(262),f=r(259),v=r(260),x=r(175),O=r(8),$=r(13),y=r(2);function C(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function k(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?C(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):C(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var _=Object(O.a)(m.a,d.a,h.a,f.a,v.a,l.a);t.a=_.extend({name:"v-dialog",directives:{ClickOutside:x.a},props:{dark:Boolean,disabled:Boolean,fullscreen:Boolean,light:Boolean,maxWidth:[String,Number],noClickAnimation:Boolean,origin:{type:String,default:"center center"},persistent:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,transition:{type:[String,Boolean],default:"dialog-transition"},width:[String,Number]},data:function(){return{activatedBy:null,animate:!1,animateTimeout:-1,stackMinZIndex:200,previousActiveElement:null}},computed:{classes:function(){var e;return e={},Object(n.a)(e,"v-dialog ".concat(this.contentClass).trim(),!0),Object(n.a)(e,"v-dialog--active",this.isActive),Object(n.a)(e,"v-dialog--persistent",this.persistent),Object(n.a)(e,"v-dialog--fullscreen",this.fullscreen),Object(n.a)(e,"v-dialog--scrollable",this.scrollable),Object(n.a)(e,"v-dialog--animated",this.animate),e},contentClasses:function(){return{"v-dialog__content":!0,"v-dialog__content--active":this.isActive}},hasActivator:function(){return Boolean(!!this.$slots.activator||!!this.$scopedSlots.activator)}},watch:{isActive:function(e){var t;e?(this.show(),this.hideScroll()):(this.removeOverlay(),this.unbind(),null===(t=this.previousActiveElement)||void 0===t||t.focus())},fullscreen:function(e){this.isActive&&(e?(this.hideScroll(),this.removeOverlay(!1)):(this.showScroll(),this.genOverlay()))}},created:function(){this.$attrs.hasOwnProperty("full-width")&&Object($.e)("full-width",this)},beforeMount:function(){var e=this;this.$nextTick((function(){e.isBooted=e.isActive,e.isActive&&e.show()}))},beforeDestroy:function(){"undefined"!=typeof window&&this.unbind()},methods:{animateClick:function(){var e=this;this.animate=!1,this.$nextTick((function(){e.animate=!0,window.clearTimeout(e.animateTimeout),e.animateTimeout=window.setTimeout((function(){return e.animate=!1}),150)}))},closeConditional:function(e){var t=e.target;return!(this._isDestroyed||!this.isActive||this.$refs.content.contains(t)||this.overlay&&t&&!this.overlay.$el.contains(t))&&this.activeZIndex>=this.getMaxZIndex()},hideScroll:function(){this.fullscreen?document.documentElement.classList.add("overflow-y-hidden"):h.a.options.methods.hideScroll.call(this)},show:function(){var e=this;!this.fullscreen&&!this.hideOverlay&&this.genOverlay(),this.$nextTick((function(){e.$nextTick((function(){var t,r;(null===(t=e.$refs.dialog)||void 0===t?void 0:t.contains(document.activeElement))||(e.previousActiveElement=document.activeElement,null===(r=e.$refs.dialog)||void 0===r||r.focus()),e.bind()}))}))},bind:function(){window.addEventListener("focusin",this.onFocusin)},unbind:function(){window.removeEventListener("focusin",this.onFocusin)},onClickOutside:function(e){this.$emit("click:outside",e),this.persistent?this.noClickAnimation||this.animateClick():this.isActive=!1},onKeydown:function(e){if(e.keyCode===y.t.esc&&!this.getOpenDependents().length)if(this.persistent)this.noClickAnimation||this.animateClick();else{this.isActive=!1;var t=this.getActivator();this.$nextTick((function(){return t&&t.focus()}))}this.$emit("keydown",e)},onFocusin:function(e){if(e&&this.retainFocus){var t=e.target;if(t&&this.$refs.dialog&&![document,this.$refs.dialog].includes(t)&&!this.$refs.dialog.contains(t)&&this.activeZIndex>=this.getMaxZIndex()&&!this.getOpenDependentElements().some((function(e){return e.contains(t)}))){var r=this.$refs.dialog.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),n=Object(o.a)(r).find((function(e){return!e.hasAttribute("disabled")}));n&&n.focus()}}},genContent:function(){var e=this;return this.showLazyContent((function(){return[e.$createElement(c.a,{props:{root:!0,light:e.light,dark:e.dark}},[e.$createElement("div",{class:e.contentClasses,attrs:k({role:"dialog","aria-modal":e.hideOverlay?void 0:"true"},e.getScopeIdAttrs()),on:{keydown:e.onKeydown},style:{zIndex:e.activeZIndex},ref:"content"},[e.genTransition()])])]}))},genTransition:function(){var content=this.genInnerContent();return this.transition?this.$createElement("transition",{props:{name:this.transition,origin:this.origin,appear:!0}},[content]):content},genInnerContent:function(){var data={class:this.classes,attrs:{tabindex:this.isActive?0:void 0},ref:"dialog",directives:[{name:"click-outside",value:{handler:this.onClickOutside,closeConditional:this.closeConditional,include:this.getOpenDependentElements}},{name:"show",value:this.isActive}],style:{transformOrigin:this.origin}};return this.fullscreen||(data.style=k(k({},data.style),{},{maxWidth:Object(y.g)(this.maxWidth),width:Object(y.g)(this.width)})),this.$createElement("div",data,this.getContentSlot())}},render:function(e){return e("div",{staticClass:"v-dialog__container",class:{"v-dialog__container--attached":""===this.attach||!0===this.attach||"attach"===this.attach}},[this.genActivator(),this.genContent()])}})},614:function(e,t,r){e.exports=r.p+"img/logo48x48.83dd37c.png"},637:function(e,t,r){},670:function(e,t,r){"use strict";r(637)},690:function(e,t,r){"use strict";r.r(t);var o=r(233),n=r(165),c=r(241),l=r(76),m=r(587),d=r(528),h=r(98),f=(r(34),r(18)),v=(r(52),r(28),r(150),r(6),r(48),r(51),r(636),r(354),r(36),{name:"FotoPerfil",data:function(){return{saving:!1,saved:!1,deleting:!1,deleted:!1,errorDialog:null,errorText:"",uploadFieldName:"file",maxSize:1024,fotoPerfil:"",formData:null,imageFile:null}},props:{},watch:{},methods:{launchFilePicker:function(){this.$refs.file.click()},onFileChange:function(e,t){var r=this.maxSize;if(this.saved=!1,this.deleted=!1,this.formData=null,this.imageFile=t[0],1===t.length){var o=this.imageFile.size/r/r;if(!this.imageFile.type.match("image.png")&&!this.imageFile.type.match("image.jpg")&&!this.imageFile.type.match("image.jpeg"))return this.errorDialog=!0,this.errorText="Se debe elegir un archivo imagen jpg o png.",this.formData=null,void(this.imageFile=null);if(o>1)return this.errorDialog=!0,this.errorText="El archivo es muy grande, favor elegir un archivo de hasta 1MB.",this.formData=null,void(this.imageFile=null);this.formData=new FormData,this.formData.append("image",this.imageFile),this.fotoPerfil=URL.createObjectURL(this.imageFile)}else this.formData=null,this.imageFile=null,this.errorDialog=!0,this.errorText="Solo se puede subir una foto."},reiniciarImagen:function(){var e=this.$store.state.modules.usuarios.fotoPerfil;this.fotoPerfil=e||"",this.formData=null,this.imageFile=null},actualizarFotoPerfil:function(){var e=this;return Object(f.a)(regeneratorRuntime.mark((function t(){var r,o,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.saving=!0,r=e.$store.state.modules.usuarios,t.prev=2,o=e.$firebaseFotoPerfil.storage().ref(),(n=o.child("".concat(r.uid,"/verificacion/").concat(e.imageFile.name)).put(e.imageFile)).on(e.$firebase.storage.TaskEvent.STATE_CHANGED,(function(t){var progress=t.bytesTransferred/t.totalBytes*100;switch(console.log("Upload is "+progress+"% done"),t.state){case e.$firebase.storage.TaskState.PAUSED:console.log("Upload is paused");break;case e.$firebase.storage.TaskState.RUNNING:console.log("Upload is running")}}),(function(e){console.log(e),e.code}),(function(){n.snapshot.ref.getDownloadURL().then((function(t){e.$store.commit("modules/usuarios/setFotoPerfil",t),e.saved=!0,e.saving=!1,e.reiniciarImagen()}))})),t.next=16;break;case 8:return t.prev=8,t.t0=t.catch(2),console.log("error",t.t0),t.next=13,e.$store.dispatch("modules/sistema/errorHandler",t.t0);case 13:t.sent,e.saving=!1,e.reiniciarImagen();case 16:case"end":return t.stop()}}),t,null,[[2,8]])})))()},eliminarFotoPerfil:function(){var e=this;return Object(f.a)(regeneratorRuntime.mark((function t(){var r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.formData&&e.fotoPerfil){t.next=3;break}return t.abrupt("return");case 3:if(e.deleting=!0,t.prev=4,!(r=e.$firebase.auth().currentUser)){t.next=12;break}return t.next=9,r.getIdToken();case 9:t.t0=t.sent,t.next=13;break;case 12:t.t0="";case 13:return r=t.t0,t.next=16,e.$store.dispatch("modules/usuarios/setTOKEN",r);case 16:return o={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},t.next=19,e.$axios.$delete("/serviceUsuario/eliminarFotoPerfil",o);case 19:e.$store.commit("modules/usuarios/setFotoPerfil",null),e.deleted=!0,t.next=29;break;case 23:return t.prev=23,t.t1=t.catch(4),console.log("error",t.t1),t.next=28,e.$store.dispatch("modules/sistema/errorHandler",t.t1);case 28:t.sent;case 29:return t.prev=29,e.deleting=!1,e.reiniciarImagen(),t.finish(29);case 33:case"end":return t.stop()}}),t,null,[[4,23,29,33]])})))()}},created:function(){var e=this.$store.state.modules.usuarios.fotoPerfil;this.fotoPerfil=e||""}}),x=(r(670),r(32)),component=Object(x.a)(v,(function(){var e=this,t=e._self._c;return t("div",[t("div",[t("div",{attrs:{slot:"activator"},slot:"activator"},[e.fotoPerfil?t(o.a,{directives:[{def:h.a,name:"ripple",rawName:"v-ripple"}],staticClass:"mb-3 avatar-img",attrs:{size:"210px"},on:{click:function(t){return e.launchFilePicker()}}},[t("img",{attrs:{src:e.fotoPerfil,alt:""}})]):t(o.a,{directives:[{def:h.a,name:"ripple",rawName:"v-ripple"}],staticClass:"mb-3 avatar-img",attrs:{size:"210px"},on:{click:function(t){return e.launchFilePicker()}}},[t("span",{staticClass:"white--text"},[e._v("\n                    Agregue una foto de perfil\n                ")])])],1)]),e._v(" "),t("input",{ref:"file",staticStyle:{display:"none"},attrs:{type:"file",name:e.uploadFieldName},on:{change:function(t){return e.onFileChange(t.target.name,t.target.files)}}}),e._v(" "),t(m.a,{attrs:{"max-width":"300"},model:{value:e.errorDialog,callback:function(t){e.errorDialog=t},expression:"errorDialog"}},[t(c.a,[t(l.c,{staticClass:"subheading"},[e._v("\n                "+e._s(e.errorText)+"\n            ")]),e._v(" "),t(l.a,[t(d.a),e._v(" "),t(n.a,{attrs:{flat:""},on:{click:function(t){e.errorDialog=!1}}},[e._v("Got it!")])],1)],1)],1),e._v(" "),t("div",{staticClass:"mt-5"},[e.formData?t(n.a,{staticClass:"mt-1 mb-1",attrs:{block:"",text:"",color:"#683bce",loading:e.saving||e.deleting,disabled:!e.formData},on:{click:e.actualizarFotoPerfil}},[e._v("Actualizar foto de perfil")]):e._e(),e._v(" "),e.formData?t(n.a,{staticClass:"mt-1 mb-1",attrs:{block:"",disabled:e.saving||e.deleting,text:"",color:"#ff1d89"},on:{click:e.reiniciarImagen}},[e._v("Reiniciar")]):e._e(),e._v(" "),!e.formData&&e.fotoPerfil?t(n.a,{staticClass:"mt-1 mb-1",attrs:{block:"",disabled:e.saving||e.deleting,text:"",color:"red"},on:{click:e.eliminarFotoPerfil}},[e._v("Borrar foto de perfil")]):e._e()],1)],1)}),[],!1,null,"2816a24d",null);t.default=component.exports},701:function(e,t,r){},840:function(e,t,r){"use strict";r(701)}}]);