(window.webpackJsonp=window.webpackJsonp||[]).push([[59,41],{1078:function(t,r,e){"use strict";e.r(r);var o=e(165),n=e(562),l=e(561),c=e(18),d=(e(52),e(111),e(6),e(49),e(34),e(56),e(48),e(28),e(10),e(63),e(67),e(51),e(110)),f=e(660);function C(t,r){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=function(t,r){if(!t)return;if("string"==typeof t)return v(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return v(t,r)}(t))||r&&t&&"number"==typeof t.length){e&&(t=e);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,l=!0,c=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return l=t.done,t},e:function(t){c=!0,n=t},f:function(){try{l||null==e.return||e.return()}finally{if(c)throw n}}}}function v(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,e=new Array(r);i<r;i++)e[i]=t[i];return e}var m=d.b.firestore(),h={name:"",layout:"",middleware:"",data:function(){return{codigo:this.$route.params.codigo,uidCurso:"",datosCurso:null,unidades:[],mostrarListaClases:!1,cargandoDatosCurso:!0,porcentajeProgreso:0,listaClases:[],listaProgresos:[],miCurso:null}},components:{ListaUnidadesClases:f.default},methods:{quitarListaClases:function(){this.mostrarListaClases=!1},agregarListaClases:function(){this.mostrarListaClases=!0},cambiarClase:function(data){var t=this;return Object(c.a)(regeneratorRuntime.mark((function r(){var e;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:console.log("data",data),e=data.datosClase,t.miCurso?"completo"===t.miCurso.tipoAcceso?t.listaProgresos.find((function(t){return t.uidClase===e.uid}))||(t.listaProgresos.push({uidCurso:t.uidCurso,uidClase:e.uid,visualizado:!0}),t.calcularPorcentajeProgreso(t.listaClases,t.listaProgresos)):"vistaPrevia"===t.miCurso.tipoAcceso&&e.vistaPrevia&&(t.listaProgresos.push({uidCurso:t.uidCurso,uidClase:e.uid,visualizado:!0}),t.calcularPorcentajeProgreso(t.listaClases,t.listaProgresos)):e.vistaPrevia&&(t.listaProgresos.push({uidCurso:t.uidCurso,uidClase:e.uid,visualizado:!0}),t.calcularPorcentajeProgreso(t.listaClases,t.listaProgresos));case 3:case"end":return r.stop()}}),r)})))()},calcularPorcentajeProgreso:function(t,r){var e,o=0,n=C(t);try{var l=function(){var t=e.value;r.find((function(r){return r.uidClase===t.uid}))&&o++};for(n.s();!(e=n.n()).done;)l()}catch(t){n.e(t)}finally{n.f()}this.porcentajeProgreso=parseInt(100*o/t.length)}},watch:{},created:function(){var t=this;return Object(c.a)(regeneratorRuntime.mark((function r(){var e,o,n,l,i,c,d,f,v,h,y,P,_,x,w,L,j;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e=t.$store.state.modules.usuarios,r.next=3,m.collection("CursosPublicado").where("codigo","==",t.codigo).get();case 3:if(!(o=r.sent).empty){r.next=7;break}return t.$router.push("/cursos"),r.abrupt("return");case 7:return t.uidCurso=o.docs[0].id,t.datosCurso=o.docs[0].data(),r.next=11,m.collection("Usuarios").doc(e.uid).collection("MisCursos").doc(t.uidCurso).get();case 11:return n=r.sent,t.miCurso=n.exists?n.data():null,r.next=15,m.collection("CursosPublicado").doc(t.uidCurso).collection("UnidadesPublicado").orderBy("ordenUnidad").get();case 15:l=r.sent,i=0,c=[],d=C(l.docs),r.prev=19,d.s();case 21:if((f=d.n()).done){r.next=32;break}return v=f.value,c.push({data:v.data(),clases:[]}),r.next=26,m.collection("CursosPublicado").doc(t.uidCurso).collection("UnidadesPublicado").doc(v.id).collection("ClasesPublicado").orderBy("ordenClase").get();case 26:h=r.sent,y=C(h.docs);try{for(y.s();!(P=y.n()).done;)_=P.value,c[i].clases.push({data:_.data(),contenido:null}),t.listaClases.push(_.data())}catch(t){y.e(t)}finally{y.f()}i++;case 30:r.next=21;break;case 32:r.next=37;break;case 34:r.prev=34,r.t0=r.catch(19),d.e(r.t0);case 37:return r.prev=37,d.f(),r.finish(37);case 40:return r.next=42,t.$firebase.firestore().collection("Usuarios").doc(e.uid).collection("MisCursos").doc(t.uidCurso).collection("ProgresosClases").get();case 42:x=r.sent,t.listaProgresos=[],w=C(x.docs);try{for(w.s();!(L=w.n()).done;)j=L.value,t.listaProgresos.push(j.data())}catch(t){w.e(t)}finally{w.f()}t.calcularPorcentajeProgreso(t.listaClases,t.listaProgresos),t.unidades=c,t.cargandoDatosCurso=!1;case 49:case"end":return r.stop()}}),r,null,[[19,34,37,40]])})))()}},y=h,P=(e(959),e(32)),component=Object(P.a)(y,(function(){var t=this,r=t._self._c;return r("div",{staticClass:"vistaClase"},[r("div",{staticClass:"mt-10 mb-10"},[r(l.a,[r(n.a,{style:t.mostrarListaClases?"":"margin-top: -15px;",attrs:{cols:"12",md:t.mostrarListaClases?"8":"12"}},[t.cargandoDatosCurso?t._e():r("nuxt-child",{attrs:{uidCurso:t.uidCurso,datosCurso:t.datosCurso,unidades:t.unidades,mostrarListaClases:t.mostrarListaClases,listaProgresos:t.listaProgresos},on:{agregarListaClases:function(r){return t.agregarListaClases(r)},cambioClase:function(r){return t.cambiarClase(r)}}})],1),t._v(" "),t.mostrarListaClases?r(n.a,{attrs:{cols:"12",md:"4"}},[r(o.a,{staticClass:"btnAgregarListaClases mb-3",attrs:{outlined:"",block:"",text:"",color:"#683bce"},on:{click:t.quitarListaClases}},[t._v("\n                    Quitar lista de clases\n                ")]),t._v(" "),r("ListaUnidadesClases",{attrs:{codigo:t.codigo,unidades:t.unidades,listaProgresos:t.listaProgresos}})],1):t._e()],1)],1)])}),[],!1,null,"3157f14f",null);r.default=component.exports},660:function(t,r,e){"use strict";e.r(r);var o=e(512),n=e(232),l=e(236),c=e(167),d=e(237),f=e(7),C=e(239),v=e(526),m=(e(36),e(28),e(82),e(111),e(6),{name:"",props:{codigo:String,unidades:Array,listaProgresos:Array},methods:{secondsToString:function(t){var r=Math.floor(t/3600);r=r<10?"0"+r:r;var e=Math.floor(t/60%60),o=t%60;return o=o<10?"0"+o:o,r+":"+(e=e<10?"0"+e:e)+":"+String(o).split(".")[0]},getColorDisplay:function(t){return this.listaProgresos.find((function(r){return r.uidClase===t}))?"green":"gray"}}}),h=e(32),component=Object(h.a)(m,(function(){var t=this,r=t._self._c;return r("div",[r(l.a,{staticStyle:{height:"70vh","overflow-y":"scroll"}},t._l(t.unidades,(function(e,l){return r("div",{key:l,staticClass:"mb-8"},[r("h4",{staticClass:"tituloUnidad mb-1"},[t._v(" "+t._s(e.data.nombreUnidad)+" ")]),t._v(" "),r(C.a,{attrs:{color:"primary"}},t._l(e.clases,(function(e,l){return r("div",{key:l},[r(c.a,{attrs:{to:"/curso/".concat(t.codigo,"/clase/").concat(e.data.uid)}},[r(f.a,[r(f.c,{staticClass:"tituloClase"},["video"===e.data.tipoClase?r(n.a,{attrs:{size:"18",color:"#683bce"}},[t._v("\n                                    mdi-play-circle\n                                ")]):t._e(),t._v(" "),"articulo"===e.data.tipoClase?r(n.a,{attrs:{size:"18",color:"#683bce"}},[t._v("\n                                    mdi-file-multiple\n                                ")]):t._e(),t._v(" "),r("p",{staticStyle:{display:"inline","margin-left":"5px !important"}},[t._v(t._s(e.data.titulo))])],1)],1),t._v(" "),r(v.a),t._v(" "),e.data.vistaPrevia?r(n.a,{attrs:{color:"#683bce",left:"",size:"18",title:"Vista previa"}},[t._v("\n                            mdi-eye\n                        ")]):t._e(),t._v(" "),r("p",{staticStyle:{display:"inline","font-size":"13px","margin-top":"16px","margin-right":"-8px"}},[t._v("\n                            "+t._s(t.secondsToString(e.data.duracion))+"\n                        ")]),t._v(" "),r(d.a,[r(n.a,{attrs:{color:t.getColorDisplay(e.data.uid)}},[t._v("\n                                mdi-star\n                            ")])],1)],1),t._v(" "),r(o.a)],1)})),0)],1)})),0)],1)}),[],!1,null,null,null);r.default=component.exports},760:function(t,r,e){},959:function(t,r,e){"use strict";e(760)}}]);