(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{532:function(m,l,t){},554:function(m,l,t){"use strict";var c=t(532),d=t.n(c)},565:function(m,l,t){"use strict";t.r(l);var c=function(){var e=this,o=e.$createElement,a=e._self._c||o;return a("div",[a("h3",{staticClass:"mt-3",class:e.modo!="crear"?e.estaHabilitado?"green--text":"red--text":"black--text"},[a("b",[e._v(`
            `+e._s(e.titulo)+`
        `)])]),e._v(" "),a("v-stepper",{staticClass:"mt-5",attrs:{vertical:""},model:{value:e.step,callback:function(s){e.step=s},expression:"step"}},e._l(e.infoTextoFormulario,function(s,i){return a("div",{key:i},[a("v-stepper-step",{attrs:{color:"#683bce",rules:[function(){return!s.error}],complete:!s.requerido||!s.error&&s.existe,step:s.paso},on:{click:function(r){e.step=s.paso}}},[e._v(`
                `+e._s(s.titulo)+`
                `),s.descripcion?a("small",[e._v(" "+e._s(s.descripcion)+" ")]):e._e()]),e._v(" "),a("v-stepper-content",{attrs:{step:s.paso}},[s.paso===1?a("v-text-field",{attrs:{"error-messages":e.nombreUsuarioErrors,counter:e.logitudesDeTexto.nombreUsuario.max,min:e.logitudesDeTexto.nombreUsuario.min,label:"Nombre de usuario",required:"",disabled:e.soloLectura},on:{input:function(r){return e.$v.datosUsuario.nombreUsuario.$touch()},blur:function(r){return e.$v.datosUsuario.nombreUsuario.$touch()}},model:{value:e.datosUsuario.nombreUsuario,callback:function(r){e.$set(e.datosUsuario,"nombreUsuario",r)},expression:"datosUsuario.nombreUsuario"}}):e._e(),e._v(" "),s.paso===2?a("v-text-field",{attrs:{"error-messages":e.correoErrors,label:"Correo",required:"",disabled:e.soloLectura},on:{input:function(r){return e.$v.datosUsuario.correo.$touch()},blur:function(r){return e.$v.datosUsuario.correo.$touch()}},model:{value:e.datosUsuario.correo,callback:function(r){e.$set(e.datosUsuario,"correo",r)},expression:"datosUsuario.correo"}}):e._e(),e._v(" "),s.paso===3?a("v-text-field",{attrs:{"error-messages":e.nombreCompletoErrors,counter:e.logitudesDeTexto.nombreCompleto.max,label:"Nombre completo",disabled:e.soloLectura},on:{input:function(r){return e.$v.datosUsuario.nombreCompleto.$touch()},blur:function(r){return e.$v.datosUsuario.nombreCompleto.$touch()}},model:{value:e.datosUsuario.nombreCompleto,callback:function(r){e.$set(e.datosUsuario,"nombreCompleto",r)},expression:"datosUsuario.nombreCompleto"}}):e._e(),e._v(" "),s.paso===4?a("v-date-picker",{attrs:{color:"#683bce","full-width":"",locale:"es-es",disabled:e.soloLectura},model:{value:e.datosUsuario.fechaNacimiento,callback:function(r){e.$set(e.datosUsuario,"fechaNacimiento",r)},expression:"datosUsuario.fechaNacimiento"}}):e._e(),e._v(" "),s.paso===5?a("div",[a("v-select",{staticClass:"mb-5",attrs:{hint:""+(e.planSeleccionado.value?"Se selecciono el: "+e.planSeleccionado.text:"No has elegido un plan todav\xEDa"),items:e.planes,"item-text":"text","item-value":"value",label:"Plan","persistent-hint":"","return-object":"","single-line":"",disabled:e.soloLectura},model:{value:e.planSeleccionado,callback:function(r){e.planSeleccionado=r},expression:"planSeleccionado"}}),e._v(" "),e.planSeleccionado.value?a("div",{staticClass:"fechasCompras"},[a("v-row",{attrs:{justify:"space-around"}},[a("v-col",{attrs:{cols:"12",md:"7"}},[a("v-date-picker",{attrs:{color:"#683bce","full-width":"",range:"",disabled:e.soloLectura},model:{value:e.rangoFechaPremium,callback:function(r){e.rangoFechaPremium=r},expression:"rangoFechaPremium"}})],1),e._v(" "),a("v-col",{attrs:{cols:"12",md:"5"}},[a("v-time-picker",{attrs:{color:"#683bce",format:"24hr","full-width":"","use-seconds":"",disabled:e.soloLectura},model:{value:e.horaFechaPremium,callback:function(r){e.horaFechaPremium=r},expression:"horaFechaPremium"}})],1)],1)],1):e._e()],1):e._e(),e._v(" "),s.paso===6?a("div",[a("v-select",{staticClass:"mb-5",attrs:{hint:""+(e.rolSeleccionado.value?"Se selecciono el: "+e.rolSeleccionado.text:"No has elegido un rol todav\xEDa"),items:e.roles,"item-text":"text","item-value":"value",label:"Rol","persistent-hint":"","return-object":"","single-line":"",disabled:e.soloLectura},model:{value:e.rolSeleccionado,callback:function(r){e.rolSeleccionado=r},expression:"rolSeleccionado"}}),e._v(" "),a("div",{},[a("v-row",{attrs:{justify:"space-around"}},[a("v-col",{attrs:{cols:"12",md:"7"}},[a("v-combobox",{attrs:{disabled:e.soloLectura||!e.esMiembroJekuaa()||!e.necesitaSecciones(),items:e.secciones,label:"Secciones",multiple:"",chips:""},scopedSlots:e._u([{key:"selection",fn:function(r){return[a("v-chip",e._b({key:JSON.stringify(r.item),attrs:{"input-value":r.selected,disabled:r.disabled},on:{"click:close":function(z){return r.parent.selectItem(r.item)}}},"v-chip",r.attrs,!1),[a("v-avatar",{staticClass:"accent white--text",attrs:{left:""},domProps:{textContent:e._s(r.item.slice(0,1).toUpperCase())}}),e._v(`
                                            `+e._s(r.item)+`
                                        `)],1)]}}],null,!0),model:{value:e.datosUsuario.jekuaaRoles.secciones,callback:function(r){e.$set(e.datosUsuario.jekuaaRoles,"secciones",r)},expression:"datosUsuario.jekuaaRoles.secciones"}})],1),e._v(" "),a("v-col",{attrs:{cols:"12",md:"5"}},[a("v-switch",{attrs:{disabled:e.soloLectura||!e.esMiembroJekuaa(),label:"Instructor: "+e.datosUsuario.jekuaaRoles.instructor.toString()},model:{value:e.datosUsuario.jekuaaRoles.instructor,callback:function(r){e.$set(e.datosUsuario.jekuaaRoles,"instructor",r)},expression:"datosUsuario.jekuaaRoles.instructor"}})],1)],1)],1)],1):e._e(),e._v(" "),s.paso===7?a("v-text-field",{attrs:{"error-messages":e.nombreCompletoErrors,counter:e.logitudesDeTexto.nombreCompleto.max,label:"Jekuaa Points",type:"number",disabled:e.soloLectura},on:{input:function(r){return e.$v.datosUsuario.nombreCompleto.$touch()},blur:function(r){return e.$v.datosUsuario.nombreCompleto.$touch()}},model:{value:e.datosUsuario.jekuaaPoint,callback:function(r){e.$set(e.datosUsuario,"jekuaaPoint",r)},expression:"datosUsuario.jekuaaPoint"}}):e._e(),e._v(" "),s.paso===8?a("v-text-field",{attrs:{"error-messages":e.contrasenhaErrors,counter:e.logitudesDeTexto.contrasenha.max,min:e.logitudesDeTexto.contrasenha.min,label:"Contrase\xF1a",disabled:e.soloLectura},on:{input:function(r){return e.$v.contrasenha.$touch()},blur:function(r){return e.$v.contrasenha.$touch()}},model:{value:e.contrasenha,callback:function(r){e.contrasenha=r},expression:"contrasenha"}}):e._e(),e._v(" "),e.soloLectura&&s.paso===e.infoTextoFormulario.length?e._e():a("v-btn",{staticClass:"white--text",attrs:{color:"#683bce"},on:{click:e.next}},[e._v(`
                    `+e._s(s.paso===e.infoTextoFormulario.length?e.modo+" usuario":"Continue")+`
                `)]),e._v(" "),e.soloLectura?e._e():a("v-btn",{attrs:{text:""}},[e._v(`
                    Cancelar
                `)])],1)],1)}),0)],1)},d=[],y=t(33),D=t(109),E=t(24),J=t(14),V=t(347),f=t(511),n=t(512),u={nombreUsuario:{max:15,min:4},nombreCompleto:{max:50,min:0},contrasenha:{max:20,min:6}},v={mixins:[f.validationMixin],validations:{datosUsuario:{nombreUsuario:{required:n.required,minLength:Object(n.minLength)(u.nombreUsuario.min),maxLength:Object(n.maxLength)(u.nombreUsuario.max)},correo:{required:n.required,email:n.email},nombreCompleto:{maxLength:Object(n.maxLength)(u.nombreCompleto.max)},jekuaaPoint:{numeric:n.numeric}},contrasenha:{required:n.required,minLength:Object(n.minLength)(u.contrasenha.min),maxLength:Object(n.maxLength)(u.contrasenha.max)}},data:function(){return{datosUsuario:{nombreUsuario:"",correo:"",nombreCompleto:"",fechaNacimiento:"",jekuaaPremium:{plan:"",fechaCompra:"",fechaHasta:""},jekuaaRoles:{rol:"estudiante",secciones:[],instructor:!1},jekuaaPoint:0},contrasenha:"",estaHabilitado:!0,planSeleccionado:{text:"Elegir un plan",value:""},rangoFechaPremium:[],horaFechaPremium:"",rolSeleccionado:{text:"Estudiante",value:"estudiante"},step:1,modo:"lectura",planes:[{text:"Elegir un plan",value:""},{text:"B\xE1sico",value:"basico"},{text:"Avanzado",value:"avanzado"}],roles:[{text:"Estudiante",value:"estudiante"},{text:"MiembroJekaa",value:"miembroJekuaa"},{text:"Propietario",value:"propietario"}],secciones:["informatica","matematica"],logitudesDeTexto:u,datosRoles:[],infoTextoFormulario:[{paso:1,titulo:"Nombre de usuario",descripcion:"Identificador del usuario",error:!1,existe:!1,requerido:!0},{paso:2,titulo:"Correo",descripcion:"Identificador del usuario",error:!1,existe:!1,requerido:!0},{paso:3,titulo:"Nombre completo",descripcion:null,error:!1,existe:!1,requerido:!1},{paso:4,titulo:"Fecha de nacimiento",descripcion:null,error:!1,existe:!1,requerido:!1},{paso:5,titulo:"Datos Jekuaa Premium",descripcion:null,error:!1,existe:!0,requerido:!1},{paso:6,titulo:"Datos Jekuaa Roles",descripcion:null,error:!1,existe:!0,requerido:!1},{paso:7,titulo:"Datos Jekuaa Points",descripcion:null,error:!1,existe:!1,requerido:!1},{paso:8,titulo:"Contrase\xF1a del usuario",descripcion:null,error:!1,existe:!1,requerido:!0}]}},props:{uid:String,accionModo:String,usuario:Object,habilitado:Boolean},computed:{nombreUsuarioErrors:function(){var o=[];return this.$v.datosUsuario.nombreUsuario.$dirty&&(!this.$v.datosUsuario.nombreUsuario.minLength&&o.push("El nombre de usuario es muy corto."),!this.$v.datosUsuario.nombreUsuario.maxLength&&o.push("El nombre de usuario es muy largo."),!this.$v.datosUsuario.nombreUsuario.required&&o.push("Nombre de usuario es necesario.")),this.infoTextoFormulario[0].error=!!o.length,o},correoErrors:function(){var o=[];return this.$v.datosUsuario.correo.$dirty&&(!this.$v.datosUsuario.correo.email&&o.push("El correo debe de ser valido."),!this.$v.datosUsuario.correo.required&&o.push("Correo del usuario es necesaio.")),this.infoTextoFormulario[1].error=!!o.length,o},nombreCompletoErrors:function(){var o=[];return this.$v.datosUsuario.nombreCompleto.$dirty&&!this.$v.datosUsuario.nombreCompleto.maxLength&&o.push("El nombre de usuario es muy largo."),this.infoTextoFormulario[2].error=!!o.length,o},jekuaaPointsErrors:function(){var o=[];return this.$v.datosUsuario.jekuaaPoint.$dirty&&!this.$v.datosUsuario.jekuaaPoint.numeric&&o.push("Debe ser numerico."),this.infoTextoFormulario[6].error=!!o.length,o},contrasenhaErrors:function(){var o=[];return this.$v.contrasenha.$dirty&&(!this.$v.contrasenha.minLength&&o.push("La contrase\xF1a es muy corta."),!this.$v.contrasenha.maxLength&&o.push("La contrase\xF1a es muy larga."),this.modo==="crear"&&!this.$v.contrasenha.required&&o.push("La contrase\xF1a es requerida.")),this.infoTextoFormulario[7].error=!!o.length,o},soloLectura:function(){return this.modo==="leer"},titulo:function(){if(this.modo==="leer")return"Datos del usuario: ".concat(this.usuario.nombreUsuario," - ").concat(this.estaHabilitado?"(Habilitado)":"(Deshabilitado)");if(this.modo==="crear")return"Crear nuevo usuario";if(this.modo==="actualizar")return"Actualizar al usuario: ".concat(this.usuario.nombreUsuario," - ").concat(this.estaHabilitado?"(Habilitado)":"(Deshabilitado)")}},methods:{stringFechaPorSegundos:function(o){return new Date(new Date(o*1e3).getTime()-new Date().getTimezoneOffset()*6e4).toISOString().substring(0,19)},submit:function(){this.$v.$touch(),console.log("this.datosUsuario",this.datosUsuario);var o=this.infoTextoFormulario.find(function(r){return r.error||r.requerido&&!r.existe});if(o){alert("No se puede crear el usuario, verifique los campos.");return}var a=JSON.parse(JSON.stringify(this.datosUsuario));if(console.log("datosUsuario",a),a.nombreCompleto=a.nombreCompleto?a.nombreCompleto:"",a.fechaNacimiento=a.fechaNacimiento?new Date("".concat(a.fechaNacimiento,"T05:00:00.000Z")).getTime():null,a.jekuaaPremium.fechaCompra=a.jekuaaPremium.plan?new Date("".concat(a.jekuaaPremium.fechaCompra,"T").concat(this.horaFechaPremium)).getTime():null,a.jekuaaPremium.fechaHasta=a.jekuaaPremium.plan?new Date("".concat(a.jekuaaPremium.fechaHasta,"T").concat(this.horaFechaPremium)).getTime():null,a.jekuaaPoint=a.jekuaaPoint?Number(a.jekuaaPoint):0,console.log("this.modo",this.modo),this.modo==="crear")this.$emit("crearUsuario",{datosUsuario:a,contrasenha:this.contrasenha});else if(this.modo==="actualizar"){var s=this.filtrarDatosActualizados(a),i={};Object.keys(s).length&&(i=Object.assign(i,{datosUsuario:s})),this.contrasenha&&(i=Object.assign(i,{contrasenha:this.contrasenha})),this.$emit("actualizarUsuario",i)}},clear:function(){this.$v.$reset(),this.datosUsuario.nombreUsuario="",this.datosUsuario.correo="",this.datosUsuario.nombreCompleto="",this.datosUsuario.fechaNacimiento="",this.datosUsuario.jekuaaPremium={plan:"",fechaCompra:"",fechaHasta:""},this.datosUsuario.jekuaaRoles={rol:"estudiante",secciones:[],instructor:!1},this.datosUsuario.jekuaaPoint=0},necesitaSecciones:function(){var o=this.rolSeleccionado.value,a=[{rol:"propietario",nesecitaSecciones:!1,esMiembroJekuaa:!0,nivel:10},{rol:"miembroJekuaa",nesecitaSecciones:!0,esMiembroJekuaa:!0,nivel:5},{rol:"estudiante",nesecitaSecciones:!1,esMiembroJekuaa:!1,nivel:1}],s=a.find(function(i){return i.rol===o});return s.nesecitaSecciones},esMiembroJekuaa:function(){var o=this.rolSeleccionado.value,a=[{rol:"propietario",nesecitaSecciones:!1,esMiembroJekuaa:!0,nivel:10},{rol:"miembroJekuaa",nesecitaSecciones:!0,esMiembroJekuaa:!0,nivel:5},{rol:"estudiante",nesecitaSecciones:!1,esMiembroJekuaa:!1,nivel:1}],s=a.find(function(i){return i.rol===o});return s.esMiembroJekuaa},next:function(){if(this.step===8){this.submit();return}this.step++},filtrarDatosActualizados:function(o){var a={};o.nombreUsuario!=this.usuario.nombreUsuario&&Object.assign(a,{nombreUsuario:o.nombreUsuario}),o.correo!=this.usuario.correo&&Object.assign(a,{correo:o.correo}),o.nombreCompleto!=this.usuario.nombreCompleto&&Object.assign(a,{nombreCompleto:o.nombreCompleto}),this.usuario.fechaNacimiento?o.fechaNacimiento!=this.usuario.fechaNacimiento._seconds*1e3&&Object.assign(a,{fechaNacimiento:o.fechaNacimiento}):o.fechaNacimiento!=this.usuario.fechaNacimiento&&Object.assign(a,{fechaNacimiento:o.fechaNacimiento}),this.usuario.jekuaaPremium.plan?(o.jekuaaPremium.plan!=this.usuario.jekuaaPremium.plan||o.jekuaaPremium.fechaCompra!=this.usuario.jekuaaPremium.fechaCompra._seconds*1e3||o.jekuaaPremium.fechaHasta!=this.usuario.jekuaaPremium.fechaHasta._seconds*1e3)&&Object.assign(a,{jekuaaPremium:o.jekuaaPremium}):(o.jekuaaPremium.plan!=this.usuario.jekuaaPremium.plan||o.jekuaaPremium.fechaCompra!=this.usuario.jekuaaPremium.fechaCompra||o.jekuaaPremium.fechaHasta!=this.usuario.jekuaaPremium.fechaHasta)&&Object.assign(a,{jekuaaPremium:o.jekuaaPremium});var s=o.jekuaaRoles.secciones.sort(),i=this.usuario.jekuaaRoles.secciones.sort();return(o.jekuaaRoles.rol!=this.usuario.jekuaaRoles.rol||JSON.stringify(s)!=JSON.stringify(i)||o.jekuaaRoles.instructor!=this.usuario.jekuaaRoles.instructor)&&Object.assign(a,{jekuaaRoles:o.jekuaaRoles}),o.jekuaaPoint!=this.usuario.jekuaaPoint&&Object.assign(a,{jekuaaPoint:o.jekuaaPoint}),a}},watch:{habilitado:function(o,a){this.estaHabilitado=o},planSeleccionado:function(o,a){if(this.datosUsuario.jekuaaPremium.plan=o.value,!o.value){this.rangoFechaPremium=[],this.horaFechaPremium="",this.infoTextoFormulario[4].error=!1;return}(this.rangoFechaPremium.length<2||!this.horaFechaPremium)&&(this.infoTextoFormulario[4].error=!0)},rangoFechaPremium:function(o,a){if(this.planSeleccionado.value){if(console.log("this.planSeleccionado.value",this.planSeleccionado.value),console.log("nuevo",o),o.length<2){this.infoTextoFormulario[4].error=!0;return}this.infoTextoFormulario[4].error=!1;var s=new Date(o[0]),i=new Date(o[1]);s.getTime()<i.getTime()?(this.datosUsuario.jekuaaPremium.fechaCompra=o[0],this.datosUsuario.jekuaaPremium.fechaHasta=o[1]):s.getTime()>i.getTime()?(this.datosUsuario.jekuaaPremium.fechaCompra=o[1],this.datosUsuario.jekuaaPremium.fechaHasta=o[0]):this.rangoFechaPremium=[],console.log("this.datosUsuario.jekuaaPremium",this.datosUsuario.jekuaaPremium),this.horaFechaPremium||(this.infoTextoFormulario[4].error=!0)}},horaFechaPremium:function(o,a){this.planSeleccionado.value&&(this.rangoFechaPremium.length<2||!o?this.infoTextoFormulario[4].error=!0:this.infoTextoFormulario[4].error=!1)},rolSeleccionado:function(o,a){this.datosUsuario.jekuaaRoles.rol=o.value,this.esMiembroJekuaa()?this.necesitaSecciones()?this.datosUsuario.jekuaaRoles.secciones.length?this.infoTextoFormulario[5].error=!1:this.infoTextoFormulario[5].error=!0:(this.datosUsuario.jekuaaRoles.secciones=[],this.infoTextoFormulario[5].error=!1):(this.datosUsuario.jekuaaRoles.secciones=[],this.datosUsuario.jekuaaRoles.instructor=!1,this.infoTextoFormulario[5].error=!1)},"datosUsuario.jekuaaRoles.secciones":function(o,a){this.necesitaSecciones()&&(o.length?this.infoTextoFormulario[5].error=!1:this.infoTextoFormulario[5].error=!0)},"datosUsuario.nombreUsuario":function(o,a){this.infoTextoFormulario[0].existe=!!o},"datosUsuario.correo":function(o,a){this.infoTextoFormulario[1].existe=!!o},contrasenha:function(o,a){this.infoTextoFormulario[7].existe=!!o}},mounted:function(){var o=this;if(this.modo=this.accionModo,this.modo==="crear")this.datosUsuario={nombreUsuario:"",correo:"",nombreCompleto:"",fechaNacimiento:"",jekuaaPremium:{plan:"",fechaCompra:"",fechaHasta:""},jekuaaRoles:{rol:"estudiante",secciones:[],instructor:!1},jekuaaPoint:0},this.contrasenha="",this.planSeleccionado={text:"Elegir un plan",value:""},this.rangoFechaPremium=[],this.horaFechaPremium="",this.rolSeleccionado={text:"Estudiante",value:"estudiante"};else{if(this.infoTextoFormulario[7].requerido=!1,this.datosUsuario=JSON.parse(JSON.stringify(this.usuario)),this.estaHabilitado=this.habilitado,this.datosUsuario.fechaNacimiento=this.usuario.fechaNacimiento?this.stringFechaPorSegundos(this.usuario.fechaNacimiento._seconds).substr(0,10):"",this.planSeleccionado=this.planes.find(function(i){return i.value===o.usuario.jekuaaPremium.plan}),this.planSeleccionado.value){var a=this.stringFechaPorSegundos(this.usuario.jekuaaPremium.fechaCompra._seconds),s=this.stringFechaPorSegundos(this.usuario.jekuaaPremium.fechaHasta._seconds);this.rangoFechaPremium[0]=a.substr(0,10),this.rangoFechaPremium[1]=s.substr(0,10),this.datosUsuario.jekuaaPremium.fechaCompra=a.substr(0,10),this.datosUsuario.jekuaaPremium.fechaHasta=s.substr(0,10),this.horaFechaPremium=a.substr(11,a.length)}this.rolSeleccionado=this.roles.find(function(i){return i.value===o.usuario.jekuaaRoles.rol})}}},p=v,H=t(554),b=t(42),_=t(48),j=t.n(_),x=t(241),g=t(117),k=t(613),P=t(486),U=t(846),S=t(806),C=t(485),$=t(635),F=t(801),T=t(802),N=t(803),O=t(804),L=t(262),R=t(840),h=Object(b.a)(p,c,d,!1,null,null,null),M=l.default=h.exports;j()(h,{VAvatar:x.a,VBtn:g.a,VChip:k.a,VCol:P.a,VCombobox:U.a,VDatePicker:S.a,VRow:C.a,VSelect:$.a,VStepper:F.a,VStepperContent:T.a,VStepperStep:N.a,VSwitch:O.a,VTextField:L.a,VTimePicker:R.a})}}]);
